{"version":3,"file":"static/js/3105.4e3b6829.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/support/RouteLayerInteraction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import r from\"../../../../core/Accessor.js\";import{destroyHandle as t}from\"../../../../core/handleUtils.js\";import{destroyMaybe as o}from\"../../../../core/maybe.js\";import{watch as s,initial as i}from\"../../../../core/reactiveUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as p}from\"../../../../core/support/UpdatingHandles.js\";import n from\"../../../../layers/GraphicsLayer.js\";import c from\"../../../../rest/support/PointBarrier.js\";import h from\"../../../../rest/support/PolygonBarrier.js\";import y from\"../../../../rest/support/PolylineBarrier.js\";import d from\"../../../../rest/support/Stop.js\";import m from\"../../../../widgets/Sketch/SketchViewModel.js\";function g(e,r){e.networkFeature=r}function u(e){const r=w(e.graphic);return{...e,networkFeature:r}}function b(e){const r=e.graphics.map(e=>w(e));return{...e,networkFeatures:r}}function w(e){return e.networkFeature}function k(e){return\"point\"===e?.type||\"polyline\"===e?.type||\"polygon\"===e?.type}let _=class extends r{constructor(e){super(e),this._createMode=null,this._graphicsLayer=new n({internal:!0,listMode:\"hide\",title:\"RouteLayerInteraction layer\"}),this._updatingHandles=new p,this.enabled=!0,this._handleSketchViewModelEvents=async e=>{switch(e.type){case\"update\":switch(e.state){case\"active\":case\"complete\":for(const r of e.graphics){w(r).geometry=k(r.geometry)?r.geometry.clone():null}}break;case\"undo\":case\"redo\":break;case\"delete\":for(const r of e.graphics){const e=w(r);this._removeNetworkFeature(e)}break;case\"create\":if(e.graphic&&\"complete\"===e.state&&this._createMode){const r=e.graphic.geometry?.clone(),t=e.graphic.symbol?.clone();if(!r)break;switch(this._createMode){case\"stop\":{if(\"point\"!==r.type)break;const{stops:t}=this.layer;if(t.length>0&&t.every(({geometry:e})=>!e)){t.at(0).geometry=r;break}if(t.length>1&&t.filter((e,r)=>0!==r).every(({geometry:e})=>!e)){t.at(1).geometry=r;break}const o=new d({geometry:r});t.add(o),g(e.graphic,o);break}case\"point-barrier\":{if(\"point\"!==r.type)break;const o=new c({geometry:r,symbol:t});this.layer.pointBarriers.add(o),g(e.graphic,o);break}case\"polyline-barrier\":{if(\"polyline\"!==r.type)break;const o=new y({geometry:r,symbol:t});this.layer.polylineBarriers.add(o),g(e.graphic,o);break}case\"polygon-barrier\":{if(\"polygon\"!==r.type)break;const o=new h({geometry:r,symbol:t});this.layer.polygonBarriers.add(o),g(e.graphic,o);break}}}}(await this.view.whenLayerView(this.layer)).emit(e.type,\"create\"===e.type?u(e):b(e))}}initialize(){this._sketchViewModel=new m({layer:this._graphicsLayer,view:this.view}),this.addHandles([s(()=>this.enabled,e=>{e?this._activate():this._deactivate()},i),s(()=>{const{stops:e,pointBarriers:r,polylineBarriers:t,polygonBarriers:o}=this.layer;return{stops:e,pointBarriers:r,polylineBarriers:t,polygonBarriers:o}},()=>{this.enabled&&this._loadClonedGraphics()}),this._sketchViewModel.on([\"create\",\"delete\",\"redo\",\"undo\",\"update\"],this._handleSketchViewModelEvents),t(this._updatingHandles)])}destroy(){this.view.map.remove(this._graphicsLayer),this._graphicsLayer.removeAll(),this._graphicsLayer=o(this._graphicsLayer),this._sketchViewModel=o(this._sketchViewModel)}get selectedNetworkFeatures(){return this._sketchViewModel.updateGraphics.map(e=>w(e))}get updating(){return this._updatingHandles.updating}create(e){switch(this._createMode=e,e){case\"stop\":this.layer.defaultSymbols.stops?.unlocated&&(this._sketchViewModel.pointSymbol=this.layer.defaultSymbols.stops.unlocated.clone());break;case\"point-barrier\":this.layer.defaultSymbols.pointBarriers&&(this._sketchViewModel.pointSymbol=this.layer.defaultSymbols.pointBarriers.clone());break;case\"polyline-barrier\":this.layer.defaultSymbols.polylineBarriers&&(this._sketchViewModel.polylineSymbol=this.layer.defaultSymbols.polylineBarriers.clone());break;case\"polygon-barrier\":this.layer.defaultSymbols.polygonBarriers&&(this._sketchViewModel.polygonSymbol=this.layer.defaultSymbols.polygonBarriers.clone())}switch(e){case\"stop\":case\"point-barrier\":return this._sketchViewModel.create(\"point\");case\"polyline-barrier\":return this._sketchViewModel.create(\"polyline\");case\"polygon-barrier\":return this._sketchViewModel.create(\"polygon\")}}remove(e){const r=this._graphicsLayer.graphics.find(r=>w(r)===e);r&&this._graphicsLayer.remove(r),this._removeNetworkFeature(e)}_activate(){this._loadClonedGraphics(),this.view.map.add(this._graphicsLayer)}_deactivate(){this._sketchViewModel.cancel(),this.view.map?.remove(this._graphicsLayer),this._graphicsLayer.removeAll()}_loadClonedGraphics(){const e=[this.layer.stops,this.layer.pointBarriers,this.layer.polylineBarriers,this.layer.polygonBarriers].flatMap(e=>e.toArray().map(e=>{const r=e.toGraphic();return r.networkFeature=e,r}));this._graphicsLayer.removeAll().addMany(e)}_removeNetworkFeature(e){switch(e.type){case\"stop\":this.layer.stops.remove(e);break;case\"point-barrier\":this.layer.pointBarriers.remove(e);break;case\"polyline-barrier\":this.layer.polylineBarriers.remove(e);break;case\"polygon-barrier\":this.layer.polygonBarriers.remove(e)}}};e([a()],_.prototype,\"enabled\",void 0),e([a({constructOnly:!0})],_.prototype,\"layer\",void 0),e([a({readOnly:!0})],_.prototype,\"selectedNetworkFeatures\",null),e([a()],_.prototype,\"updating\",null),e([a({constructOnly:!0})],_.prototype,\"view\",void 0),_=e([l(\"esri.views.2d.layers.support.RouteLayerInteraction\")],_);export{_ as RouteLayerInteraction};\n"],"names":["g","e","r","networkFeature","w","k","type","_","constructor","super","this","_createMode","_graphicsLayer","n","internal","listMode","title","_updatingHandles","p","enabled","_handleSketchViewModelEvents","async","state","graphics","geometry","clone","_removeNetworkFeature","graphic","t","symbol","stops","layer","length","every","_ref","at","filter","_ref2","o","d","add","c","pointBarriers","y","polylineBarriers","h","polygonBarriers","view","whenLayerView","emit","u","map","networkFeatures","b","initialize","_sketchViewModel","m","addHandles","s","_activate","_deactivate","i","_loadClonedGraphics","on","destroy","remove","removeAll","selectedNetworkFeatures","updateGraphics","updating","create","defaultSymbols","unlocated","pointSymbol","polylineSymbol","polygonSymbol","find","cancel","flatMap","toArray","toGraphic","addMany","a","prototype","constructOnly","readOnly","l"],"sourceRoot":""}