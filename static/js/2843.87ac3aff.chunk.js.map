{"version":3,"file":"static/js/2843.87ac3aff.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingSourceInfo.js","../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingEngine.js","../node_modules/@arcgis/core/core/mapCollectionUtils.js","../node_modules/@arcgis/core/views/support/layerViewUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../core/Accessor.js\";import has from\"../../../core/has.js\";import r from\"../../../core/Logger.js\";import{watch as i,syncAndInitial as l}from\"../../../core/reactiveUtils.js\";import{sqlAnd as s}from\"../../../core/sql.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../layers/support/FeatureFilter.js\";import{getFloorFilterClause as u}from\"../../../layers/support/floorFilterUtils.js\";import{isSubtypeGroupLayer as p,isFeatureLayer as d}from\"../../../layers/support/layerUtils.js\";import{isUtilityNetworkWebMap as c}from\"./snappingUtils.js\";import{scaleBoundsPredicate as y}from\"../../support/layerViewUtils.js\";let f=class extends t{set attributeRulesEnabled(e){this._set(\"attributeRulesEnabled\",e),e&&this.loadRules()}get layerView(){return this.view?.allLayerViews?.find(e=>e.layer===this.layer)}get valid(){const{_valid:e,snappingSource:t,layer:r}=this;return!(!t||!r)&&e}get subtypeFilter(){const{layer:e,snappingSource:t}=this;if(!p(e)||!e.subtypes?.length||!t)return{mode:\"not-in-use\",filter:null};const r=t.layerSource.sublayerSources.filter(e=>e.enabled&&e.layer.visible&&y(this.view?.scale,e.layer.effectiveScaleRange.minScale,e.layer.effectiveScaleRange.maxScale)).map(e=>e.layer.subtypeCode);if(!r.length)return{mode:\"none-visible\",filter:null};if(r.length===e.subtypes.length)return{mode:\"all-visible\",filter:null};const i=e.fieldsIndex.get(e.subtypeField)?.name??e.subtypeField;return 1===r.length?{mode:\"in-use\",filter:`${i} = ${r.getItemAt(0)}`}:{mode:\"in-use\",filter:`${i} IN (${r.join(\", \")})`}}get floorFilter(){const{view:e,layer:t}=this;return e&&t?u({view:e,layer:t}):null}constructor(e){super(e),this.layer=null,this.snappingSource=null,this.rulesTable=null,this._valid=null}initialize(){if(!this.snappingSource||!this.layer)return void(this._valid=!1);const{layer:e,snappingSource:t}=this;if(\"refresh\"in e){const r=e;this.addHandles(r.on(\"refresh\",()=>t.refresh()))}this.loadRules(),this.addHandles([i(()=>t.updating,e=>t.layerSource.updating=e,l),i(()=>t.availability,e=>t.layerSource.availability=e,l)])}getFetchCandidatesParameters(e,t,r){if(!this.valid)return[];const{layer:i,layerView:l,floorFilter:o,rulesTable:a,subtypeFilter:u}=this,y={distance:r,mode:this.view?.type??\"2d\",point:e,coordinateHelper:t.coordinateHelper,...h(),filter:l&&\"filter\"in l?l.filter:null};if(o&&(y.filter=m(y.filter,o)),\"not-in-use\"!==u.mode&&\"all-visible\"!==u.mode){if(\"none-visible\"===u.mode)return[];y.filter?y.filter.where=s(y.filter.where,u.mode):y.filter=new n({where:u.filter})}if(!this.attributeRulesEnabled)return[y];const f=t.feature,v=\"subtype-sublayer\"===f?.sourceLayer?.type?f.sourceLayer.parent:f?.sourceLayer;if(a&&f&&c(this.view?.map)&&(d(i)||p(i))&&(d(v)||p(v))&&this.view.map.utilityNetworks?.find(e=>e.isUtilityLayer(v))){if(\"loaded\"!==a.loadStatus)return[];const e=[],t=i.layerId,r=a.getFeatureSQL(v,f)?.[t];if(!r)return[];const l=r.anyVertex;let s=r.endVertex;return s&&l&&s===l&&(s=\"\"),s&&e.push({...y,returnEdge:!1,vertexMode:\"ends\",filter:m(y.filter,s)}),l&&e.push({...y,returnEdge:has(\"snapping-include-edges-when-applying-any-vertex-rule\")??!1,vertexMode:\"all\",filter:m(y.filter,l)}),e}return[y]}async loadRules(){this._valid=null;const{layer:e,view:t,attributeRulesEnabled:i}=this;if(i&&e&&t&&c(t?.map)&&(d(e)||p(e)))try{await Promise.allSettled(t.map.utilityNetworks?.map(e=>e.load())??[]);const r=t.map.utilityNetworks?.find(t=>t.isUtilityLayer(e));r&&(this.rulesTable=await r.getRulesTable(),await(this.rulesTable?.load()))}catch(l){return this._valid=!1,void r.getLogger(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\").error(\"Failed to load rules table for snapping source\",e.title)}this._valid=!0}remove(){this.destroy()}destroy(){this.snappingSource?.destroy()}};function h(){return{returnEdge:!0,vertexMode:\"all\"}}function m(e,t){return null==e?new n({where:t}):e.where?new n({where:s(e.where,t)}):new n({where:t})}e([o({constructOnly:!0})],f.prototype,\"layer\",void 0),e([o({constructOnly:!0})],f.prototype,\"snappingSource\",void 0),e([o({constructOnly:!0})],f.prototype,\"view\",void 0),e([o({value:!1})],f.prototype,\"attributeRulesEnabled\",null),e([o()],f.prototype,\"layerView\",null),e([o()],f.prototype,\"rulesTable\",void 0),e([o()],f.prototype,\"valid\",null),e([o()],f.prototype,\"subtypeFilter\",null),e([o()],f.prototype,\"floorFilter\",null),e([o()],f.prototype,\"_valid\",void 0),f=e([a(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\")],f);export{f as FeatureSnappingSourceInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import{destroyHandle as a}from\"../../../core/handleUtils.js\";import\"../../../core/has.js\";import{mapCollectionAsync as n}from\"../../../core/mapCollectionUtils.js\";import{allSettledValues as s,throwIfAborted as i}from\"../../../core/promiseUtils.js\";import{watch as o,sync as c}from\"../../../core/reactiveUtils.js\";import{getMetersPerUnitForSR as u,getMetersPerVerticalUnitForSR as l}from\"../../../core/unitUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{squaredDistance as m}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{d as S,s as g}from\"../../../chunks/vec32.js\";import{create as h}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getEpsilon as f}from\"../../../core/libs/gl-matrix-2/math/common.js\";import{UpdatingHandles as y}from\"../../../core/support/UpdatingHandles.js\";import{absoluteHeightElevationInfo as _}from\"../../../support/elevationInfoUtils.js\";import{VerticalHalfPlaneConstraint as v}from\"../sketch/constraints.js\";import{fromAnyMapPoint as w,asVec2 as j,markAsTarget as F}from\"../sketch/normalizedPoint.js\";import{FeatureSnappingSourceInfo as b}from\"./FeatureSnappingSourceInfo.js\";import{sortCandidatesInPlace as x,screenDistance as C}from\"./snappingUtils.js\";import{DrapedEdgeSnappingCandidate as R}from\"./candidates/DrapedEdgeSnappingCandidate.js\";import{EdgeSnappingCandidate as M}from\"./candidates/EdgeSnappingCandidate.js\";import{FeatureSnappingCandidate as L}from\"./candidates/FeatureSnappingCandidate.js\";import{RightAngleSnappingCandidate as I}from\"./candidates/RightAngleSnappingCandidate.js\";import{vectorToScreenPoint as G}from\"../support/viewUtils.js\";let H=class extends t{get updating(){return this._snappingSources.some(e=>null==e?.valid||!0===e.valid&&!0===e.snappingSource?.updating)||this._updatingHandles.updating}constructor(e){super(e),this.options=null,this._domain=1,this._updatingHandles=new y,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){const e=n(()=>this.options?._effectiveFeatureSources,(e,t)=>this._createSourceInfo(e,t));this._snappingSources=e,this.addHandles([a(e),o(()=>({rulesEnabled:!!this.options?.attributeRulesEnabled,sources:this._snappingSources.filter(r)}),({rulesEnabled:e,sources:t})=>{for(const r of t)r.attributeRulesEnabled=e},c)])}destroy(){this._set(\"options\",null),this._updatingHandles.destroy()}async fetchCandidates(e,t,r,a){if(!(t&this._domain&&null!=this.options&&this.options.effectiveFeatureEnabled))return[];const n=[],o=this._computeScreenSizeDistanceParameters(e,r);for(const s of this._snappingSources){if(!s?.valid||!s.snappingSource?.layerSource?.enabled||s.layerView?.suspended)continue;const t=s.getFetchCandidatesParameters(e,r,o);for(const e of t)n.push(s.snappingSource.fetchCandidates(e,a).then(e=>e.filter(e=>!this._candidateIsExcluded(s.snappingSource,e,r.excludeFeature))))}const c=(await s(n)).flat();return this._addRightAngleCandidates(c,e,o,r),i(a),x(e,c),c}_addRightAngleCandidates(e,t,r,a){const n=null!=a.vertexHandle?a.vertexHandle.rightSegment?.rightVertex?.pos:null!=a.editGeometryOperations&&\"polygon\"===a.editGeometryOperations.data.type?a.editGeometryOperations.data.parts[0]?.getFirstVertex()?.pos:null,s=null!=a.vertexHandle?a.vertexHandle.leftSegment?.leftVertex?.pos:null!=a.editGeometryOperations?a.editGeometryOperations.data.parts[0]?.getLastVertex()?.pos:null,{view:i}=this,o=w(n,i,a),c=w(s,i,a),u=e.length;for(let l=0;l<u;l++)this._addRightAngleCandidate(e[l],c,t,r,e),this._addRightAngleCandidate(e[l],o,t,r,e)}_addRightAngleCandidate(e,t,r,a,n){if(null==t||!P(e))return;const s=e.constraint.closestTo(t),i=(s[0]-r[0])/a.x,o=(s[1]-r[1])/a.y,{start:c,end:u}=e.constraint;if(i*i+o*o<=1){const r=m(j(s),j(c))>m(j(s),j(u))?c:u,a=new I({targetPoint:F(s),otherVertex:t,otherVertexType:0,previousVertex:r,constraint:new v(t,s),objectId:e.objectId,isDraped:e.isDraped,domain:1});n.push(a)}}_computeScreenSizeDistanceParameters(e,t){let r=null!=this.options?this.options.distance*(\"touch\"===t.pointer?this.options.touchSensitivityMultiplier:1):0;return null==this.view?{x:r,y:r,z:r,distance:r}:\"2d\"===this.view.type?(r*=this.view.resolution,{x:r,y:r,z:r,distance:r}):this._computeScreenSizeDistanceParameters3D(e,r,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,r,a){const{spatialReference:n}=a;r.renderCoordsHelper.toRenderCoords(e,n,O);const s=r.state.camera.computeScreenPixelSizeAt(O),i=s*r.renderCoordsHelper.unitInMeters,o=i/u(n),c=i/l(n),p=t*o,d=t*c,m=G(e,n,_,r),S=m?E(m,e,o,0,0,r,a):0,g=m?E(m,e,0,o,0,r,a):0,h=m?E(m,e,0,0,c,r,a):0;return{x:0===S?0:p/S,y:0===g?0:p/g,z:0===h?0:d/h,distance:s*t}}_candidateIsExcluded(e,t,r){if(null==r)return!1;const a=this._getCandidateObjectId(t);if(null==a)return!1;const n=e.layerSource.layer;return\"graphics\"===n.type?r.uid===a:r.sourceLayer===n&&(!(!r.attributes||!(\"objectIdField\"in n))&&r.attributes[n.objectIdField]===a)}_getCandidateObjectId(e){return e instanceof L?e.objectId:null}async _createSourceInfo(e,t){const r=e.layer;r.loaded||(await r.load(),i(t));const{view:a}=this,n=await this._createFeatureSnappingSourceType(e);return i(t),new b(null==n?{}:{snappingSource:n,view:a,layer:r})}async _createFeatureSnappingSourceType(e){switch(e.layer.type){case\"feature\":case\"geojson\":case\"csv\":case\"oriented-imagery\":case\"subtype-group\":case\"wfs\":return this._createFeatureSnappingSourceFeatureLayer(e);case\"graphics\":return this._createFeatureSnappingSourceGraphicsLayer(e);case\"map-notes\":return this._createFeatureSnappingSourceMapNotesLayer(e);case\"scene\":case\"building-scene\":return this._createFeatureSnappingSourceSceneLayer(e)}return null}async _createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;if(null==t||\"3d\"!==t.type)return null;return new((await this._getSourceModule(\"scene\")).SceneLayerSnappingSource)({layerSource:e,view:t})}async _createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source?.type){case\"feature-layer\":case\"oriented-imagery\":return new((await this._getSourceModule(\"featureService\")).FeatureServiceSnappingSource)({spatialReference:this.spatialReference,view:this.view,layerSource:e});case\"memory\":case\"csv\":case\"geojson\":case\"wfs\":if(\"mesh\"===e.layer.geometryType)return null;return new((await this._getSourceModule(\"featureCollection\")).FeatureCollectionSnappingSource)({layerSource:e,view:this.view})}return null}async _createFeatureSnappingSourceGraphicsLayer(e){return new((await this._getSourceModule(\"graphics\")).GraphicsSnappingSource)({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _createFeatureSnappingSourceMapNotesLayer(e){return new((await this._getSourceModule(\"notes\")).GraphicsSnappingSource)({getGraphicsLayers:()=>e.layer.sublayers?.toArray()??[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _getSourceModule(e){const t=this._sourceModules[e];if(null==t.loader){const t=this._loadSourceModule(e),r={module:null,loader:t};this._sourceModules[e]=r;const a=await t,n={module:a,loader:t};return this._sourceModules[e]=n,a}return null==t.module?t.loader:t.module}_loadSourceModule(e){const t=this._updatingHandles;switch(e){case\"featureService\":return t.addPromise(import(\"./featureSources/FeatureServiceSnappingSource.js\"));case\"featureCollection\":return t.addPromise(import(\"./featureSources/FeatureCollectionSnappingSource.js\"));case\"graphics\":case\"notes\":return t.addPromise(import(\"./featureSources/GraphicsSnappingSource.js\"));case\"scene\":return t.addPromise(import(\"./featureSources/SceneLayerSnappingSource.js\"))}}get test(){}};function P(e){return(e instanceof M||e instanceof R)&&!z(e)}function z({constraint:{start:e,end:t}}){const r=g(e,t),a=m(j(e),j(t));return r<f()||a/r<A}function E(e,t,r,a,n,s,{spatialReference:i}){const o=S(U,t);o[0]+=r,o[1]+=a,o[2]+=n;const c=G(o,i,_,s);return c?C(c,e):1/0}e([p({constructOnly:!0})],H.prototype,\"spatialReference\",void 0),e([p({constructOnly:!0})],H.prototype,\"view\",void 0),e([p()],H.prototype,\"options\",void 0),e([p({readOnly:!0})],H.prototype,\"updating\",null),e([p()],H.prototype,\"_snappingSources\",void 0),H=e([d(\"esri.views.interactive.snapping.FeatureSnappingEngine\")],H);const O=h(),U=h(),A=1e-4;export{H as FeatureSnappingEngine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{createTask as e}from\"./asyncUtils.js\";import t from\"./Collection.js\";import{removeIfHandle as o,destroyHandle as s}from\"./handleUtils.js\";import{isAborted as r,createAbortError as n,ignoreAbortErrors as i}from\"./promiseUtils.js\";import{on as a}from\"./reactiveUtils.js\";function c(e,o,s){const r=s?.createCollection?.()??new t,n=!!s?.recycleItems?new d:null,i=(e,t=0)=>{if(!e?.length)return;const o=r.splice(t,e.length);n?n.processRemoved(e):o.forEach(m)},c=(e,t=0)=>{if(!e?.length)return;const s=[];for(const r of e){const e=n?.use(r);if(e)s.push(e);else{const e=o(r);n?.register(r,e),s.push(e)}}r.addMany(s,t)},l=a(e,\"after-splice\",({added:e,start:t,removed:o})=>{i(o,t),c(e,t)},{sync:!0,onListenerRemove:e=>i(e.items),onListenerAdd:e=>c(e.items)});return r.addHandles(l),r}class d{constructor(){this._originalToMapped=new Map,this._removedItemCandidates=new Set,this._garbageCollectionQueued=!1}processRemoved(e){if(!e?.length)return;const{_removedItemCandidates:t}=this;for(const o of e)this._getItem(o)?.markRemoved()&&(t.add(o),this._queueGarbageCollection())}use(e){const t=this._getItem(e);return t&&(t.removed=!1),t?.item}register(e,t){this._originalToMapped.set(e,new l(t))}_getItem(e){return this._originalToMapped.get(e)}_queueGarbageCollection(){this._garbageCollectionQueued||(this._garbageCollectionQueued=!0,queueMicrotask(()=>this._garbageCollectCandidates()))}_garbageCollectCandidates(){this._garbageCollectionQueued=!1;const{_removedItemCandidates:e}=this,t=Array.from(e);e.clear(),t.forEach(e=>this._garbageCollectIfRemoved(e))}_garbageCollectIfRemoved(e){const{_originalToMapped:t}=this,o=this._getItem(e);o?.removed&&(m(o.item),t.delete(e))}}class l{constructor(e){this.item=e,this.removed=!1}markRemoved(){return this.removed=!0,!0}}function m(e){\"object\"==typeof e&&e&&(\"destroy\"in e&&\"function\"==typeof e.destroy?e.destroy():o(e))}function u(o,a,d){const l=new t,u=c(o,t=>e(async e=>{const o=await a(t,e);if(r(e))throw m(o),n();return o}),d),f=()=>null,g=async e=>{const t=await e.promise,o=u.indexOf(e);o<0||l.splice(o,1,t)};l.addMany(u.items.map(f));for(const e of u)i(g(e));const h=u.on(\"after-splice\",({added:e,start:t,deleteCount:o})=>{const s=l.splice(t,o);for(const r of s)m(r);if(e?.length){l.addMany(e.map(f),t);for(const t of e)i(g(t))}});return l.addHandles([s(u),h]),l}export{c as mapCollection,u as mapCollectionAsync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import has from\"../../core/has.js\";function n(e){return e&&\"function\"==typeof e.highlight}function i(e){return e&&\"function\"==typeof e.maskOccludee}function r(e,n,i){return null==e||e>=i&&(0===n||e<=n)}function t(e,n){if(n&&e){const{minScale:i,maxScale:t}=e;if(c(i,t))return r(n,i,t)}return!0}function c(e,n){return null!=e&&e>0||null!=n&&n>0}function u(e){return!e?.minScale||!e.maxScale||e.minScale>=e.maxScale}const a=()=>!has(\"disable-feature:layer-based-scale-visibility\");function o(e){return null!=e&&\"object\"==typeof e&&\"createQuery\"in e&&\"queryFeatures\"in e&&\"layer\"in e&&\"view\"in e}function l(n,i,r){return new e(\"layerview:spatial-reference-incompatible\",`The spatial reference of this ${n} (wkid: ${i??\"undefined\"}) is incompatible with the spatial reference of the view (wkid: ${r??\"undefined\"}).`,{})}export{a as hasLayerBasedScaleVisibility,n as highlightsSupported,t as isInEffectiveScaleRange,c as isScaleRangeActive,o as isSelectableLayerView2D,i as occludeesSupported,r as scaleBoundsPredicate,l as spatialReferenceIncompatibleError,u as validateScaleRange};\n"],"names":["f","t","attributeRulesEnabled","e","this","_set","loadRules","layerView","view","allLayerViews","find","layer","valid","_valid","snappingSource","r","subtypeFilter","p","subtypes","length","mode","filter","layerSource","sublayerSources","enabled","visible","y","scale","effectiveScaleRange","minScale","maxScale","map","subtypeCode","i","fieldsIndex","get","subtypeField","name","getItemAt","join","floorFilter","u","constructor","super","rulesTable","initialize","addHandles","on","refresh","updating","l","availability","getFetchCandidatesParameters","o","a","distance","type","point","coordinateHelper","returnEdge","vertexMode","m","where","s","n","feature","v","sourceLayer","parent","c","d","utilityNetworks","isUtilityLayer","loadStatus","layerId","getFeatureSQL","anyVertex","endVertex","push","has","Promise","allSettled","load","getRulesTable","getLogger","error","title","remove","destroy","constructOnly","prototype","value","H","_snappingSources","some","_updatingHandles","options","_domain","_sourceModules","featureService","module","loader","featureCollection","graphics","notes","scene","_effectiveFeatureSources","_createSourceInfo","rulesEnabled","sources","_ref","fetchCandidates","effectiveFeatureEnabled","_computeScreenSizeDistanceParameters","suspended","then","_candidateIsExcluded","excludeFeature","flat","_addRightAngleCandidates","x","vertexHandle","rightSegment","rightVertex","pos","editGeometryOperations","data","parts","getFirstVertex","leftSegment","leftVertex","getLastVertex","w","_addRightAngleCandidate","M","R","_ref2","constraint","start","end","g","j","A","z","P","closestTo","I","targetPoint","F","otherVertex","otherVertexType","previousVertex","objectId","isDraped","domain","pointer","touchSensitivityMultiplier","resolution","_computeScreenSizeDistanceParameters3D","spatialReference","renderCoordsHelper","toRenderCoords","O","state","camera","computeScreenPixelSizeAt","unitInMeters","G","_","S","E","h","_getCandidateObjectId","uid","attributes","objectIdField","L","loaded","_createFeatureSnappingSourceType","b","_createFeatureSnappingSourceFeatureLayer","_createFeatureSnappingSourceGraphicsLayer","_createFeatureSnappingSourceMapNotesLayer","_createFeatureSnappingSourceSceneLayer","_getSourceModule","SceneLayerSnappingSource","source","FeatureServiceSnappingSource","geometryType","FeatureCollectionSnappingSource","GraphicsSnappingSource","getGraphicsLayers","sublayers","toArray","_loadSourceModule","addPromise","test","_ref3","U","C","readOnly","createCollection","recycleItems","arguments","undefined","splice","processRemoved","forEach","use","register","addMany","added","removed","sync","onListenerRemove","items","onListenerAdd","_originalToMapped","Map","_removedItemCandidates","Set","_garbageCollectionQueued","_getItem","markRemoved","add","_queueGarbageCollection","item","set","queueMicrotask","_garbageCollectCandidates","Array","from","clear","_garbageCollectIfRemoved","delete","async","promise","indexOf","deleteCount","highlight"],"sourceRoot":""}