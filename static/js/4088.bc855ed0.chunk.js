"use strict";(self.webpackChunkn2_trees=self.webpackChunkn2_trees||[]).push([[4088],{65753:(t,e,n)=>{n.d(e,{G:()=>k});var i=n(51235),s=n(52796),a=n(10484),o=n(19393),r=n(83658),h=n(64241);const l={maxSegmentLength:1/0,maxDeviation:1/0,maxSegmentsPerCurve:12e3,minSegmentsPerCurve:1},c=1e-6,u=[0,0];function p(t){return{maxSegmentLength:t.maxSegmentLength??l.maxSegmentLength,maxDeviation:t.maxDeviation??l.maxDeviation,maxSegmentsPerCurve:t.maxSegmentsPerCurve??l.maxSegmentsPerCurve,minSegmentsPerCurve:Math.max(t.minSegmentsPerCurve??l.minSegmentsPerCurve,1)}}class d{constructor(t,e){this.curveStart=t,this.curveEnd=e,this.tStart=0,this.tEnd=0,this.tEndStack=[],this.arcEndStack=[]}get stackSize(){return this.tEndStack.length}initialize(t,e){this.tStart=0,this.arcStart=t,this.tEndStack.push(1),this.arcEndStack.push(e)}splitAt(t){this.tEndStack.push(this.tEnd),this.arcEndStack.push(this.arcEnd),this.tEndStack.push(t),this.arcEndStack.push(this.interpolate(t))}splitInHalf(){return this.splitAt((this.tStart+this.tEnd)/2)}pop(){this.tEnd=this.tEndStack.pop(),this.arcEnd=this.arcEndStack.pop()}next(){this.tStart=this.tEnd,this.arcStart=this.arcEnd}densify(t,e){let{maxDeviation:n,maxSegmentLength:i,maxSegmentsPerCurve:s,minSegmentsPerCurve:a}=e;const o=i*i,r=n*n,l=1/s,u=this.interpolate(0),p=this.interpolate(1);(0,h.kb)(this.curveStart,u)>c&&t.push(u),this.initialize(u,p);const d=1/a;for(let h=a-1;h>0;h--){const t=h*d;this.pop(),this.splitAt(t)}for(;this.stackSize>0;)this.pop(),this.tStart===this.tEnd||this.tEnd-this.tStart<l||(0===o||!isFinite(o)||(0,h.kb)(this.arcStart,this.arcEnd)<o)&&(0===r||!isFinite(r)||this.getDeviation2()<r)?(t.push(this.arcEnd),this.next()):this.splitInHalf();return(0,h.kb)(this.curveEnd,p)>c&&t.push([...this.curveEnd]),t}}class m extends d{constructor(t,e){const[n,i,s]=e.b;super(t,n),this._controlPointsStack=[],this._curveControlPoints=[i,s],this._arcControlPoints=[i,s],this._controlPointsStack.push(this._arcControlPoints)}splitAt(t){const{arcStart:e,arcEnd:n,tStart:i,tEnd:s}=this,[a,o]=this._arcControlPoints,r=(t-i)/(s-i),l=(0,h.RS)([],e,a,r),c=(0,h.RS)(u,a,o,r),p=(0,h.RS)([],o,n,r),d=(0,h.RS)([],l,c,r),m=(0,h.RS)([],c,p,r),g=(0,h.RS)([],d,m,r);this.tEndStack.push(this.tEnd),this.arcEndStack.push(this.arcEnd),this._controlPointsStack.push([m,p]),this.tEndStack.push(t),this.arcEndStack.push(g),this._arcControlPoints[0]=l,this._arcControlPoints[1]=d,this._controlPointsStack.push(this._arcControlPoints)}pop(){super.pop(),this._arcControlPoints=this._controlPointsStack.pop()}interpolate(t){const{curveStart:e,curveEnd:n}=this,[s,a]=this._curveControlPoints;return(0,i.B4)(e,s,a,n,t)}getDeviation2(){const{arcStart:t,arcEnd:e}=this,[n,i]=this._arcControlPoints;return Math.max((0,h.yE)(n,t,e),(0,h.yE)(i,t,e))}}class g extends d{constructor(t,e){const[n]=e.a;super(t,n),this._derivedEllipse=(0,r.SW)(t,e)}pop(){super.pop(),this._tMid=(this.tStart+this.tEnd)/2,this._arcMid=this.interpolate(this._tMid)}splitInHalf(){this.tEndStack.push(this.tEnd),this.arcEndStack.push(this.arcEnd),this.tEndStack.push(this._tMid),this.arcEndStack.push(this._arcMid)}interpolate(t){return(0,r.Uk)(this._derivedEllipse,t)}getDeviation2(){return(0,h.yE)(this._arcMid,this.arcStart,this.arcEnd)}}function f(t,e,n,i,s){let{cx:a,cy:o,radius:r,thetaStart:l,thetaEnd:u,isInvalid:p}=i,{maxDeviation:d,maxSegmentLength:m,maxSegmentsPerCurve:g,minSegmentsPerCurve:f}=s;if(p)return t.push([...n]),t;const y=2*r,S=[a+r*Math.cos(l),o+r*Math.sin(l)],v=[a+r*Math.cos(u),o+r*Math.sin(u)];(0,h.kb)(e,S)>c&&t.push(S);const x=Math.abs(u-l),M=m<y?2*Math.asin(m/y):x,k=d<=r?2*Math.acos(1-d/r):x,E=Math.min(M,k),w=Math.min(g,Math.max(f,Math.ceil(Math.abs(x/E)))),b=1/w;for(let h=1;h<w;h++){const e=h*b,n=l*(1-e)+u*e;t.push([a+r*Math.cos(n),o+r*Math.sin(n)])}return t.push(v),(0,h.kb)(n,v)>c&&t.push([...n]),t}function y(t,e,n,i){return new m(e,n).densify(t,i)}function S(t,e,n,i){const a=(0,s.pM)(e,n),[o]=n.c;return f(t,e,o,a,i)}function v(t,e,n,i){const s=(0,o.i)(e,n),[a]=n.a;return f(t,e,a,s,i)}function x(t,e,n,i){const[s,a,o,r,h,l,c]=n.a;return 0===l||0===c?(t.push([...s]),t):new g(e,n).densify(t,i)}function M(t,e,n,i){return(0,a.Xq)(n)?(t.push([...n]),t):(0,a.n1)(n)?y(t,e,n,i):(0,a.aO)(n)?S(t,e,n,i):(0,a.DA)(n)?v(t,e,n,i):x(t,e,n,i)}function k(t,e){if(!(0,a.Ed)(t))return t;const n=p(e),i=(0,a.FD)(t),s=[];for(const o of i){const t=[];for(let e=0;e<o.length-1;e++){const i=e+1,s=[...(0,a.yP)(o[e])];0===e&&t.push(s),M(t,s,o[i],n)}s.push(t)}return"curvePaths"in t?{...void 0!==t.hasZ?{hasZ:t.hasZ}:{},...void 0!==t.hasM?{hasM:t.hasM}:{},paths:s,spatialReference:t.spatialReference}:{...void 0!==t.hasZ?{hasZ:t.hasZ}:{},...void 0!==t.hasM?{hasM:t.hasM}:{},rings:s,spatialReference:t.spatialReference}}},74088:(t,e,n)=>{n.d(e,{previewSymbol2D:()=>A});var i=n(69539),s=n(59784),a=n(50076),o=n(85504),r=n(76931),h=n(76279),l=n(10484),c=n(65753),u=n(87840),p=n(65709),d=n(26291),m=n(27790);const g="picture-fill",f="picture-marker",y="simple-fill",S="simple-line",v="simple-marker",x="text",M="Aa",k=22,E=120,w=80,b=50,L=225,C=document.createElement("canvas");function z(t,e,n){const{extent:i}=t;if(!i)return"";const s=i.width||1,a=i.height||1;if("polygon"===t.type){const o=t.clone();(0,l.Ed)(o)&&(o.rings=(0,c.G)(o,{minSegmentsPerCurve:128}).rings),(0,h.wp)({originPosition:"upperLeft",scale:[s/e,a/n],translate:[i.xmin,i.ymax]},o,o);let r="";for(let t=0;t<o.rings.length;t++){const e=o.rings[t];for(let t=0;t<e.length;t++){const n=e[t][0],i=e[t][1],s=0===t?"M":"l",a=t===e.length-1?" Z":"";r+=`${""!==r?" ":""}${s}${n.toString()} ${i.toString()}${a}`}}return r}if("polyline"===t.type){const o=t.clone();(0,l.Ed)(o)&&(o.paths=(0,c.G)(o,{minSegmentsPerCurve:128}).paths),(0,h.QE)({originPosition:"upperLeft",scale:[s/e,a/n],translate:[i.xmin,i.ymax]},o,o);let r="";for(let t=0;t<o.paths.length;t++){const e=o.paths[t];for(let t=0;t<e.length;t++){const n=e[t][0],i=e[t][1];r+=`${""!==r?" ":""}${0===t?"M":"l"}${n.toString()} ${i.toString()}`}}return r}return""}function P(t,e){const n=C.getContext("2d"),i=[];e&&(e.weight&&i.push(e.weight),e.size&&i.push(e.size+"px"),e.family&&i.push(e.family)),n.font=i.join(" ");const{width:s,actualBoundingBoxLeft:a,actualBoundingBoxRight:o,actualBoundingBoxAscent:r,actualBoundingBoxDescent:h}=n.measureText(t);return{width:Math.ceil(Math.max(s,a+o)),height:Math.ceil(r+h),x:Math.floor(a),y:Math.floor((r-h)/2)}}function _(t){const e=t?.size;return{width:null!=e&&"object"==typeof e&&"width"in e?(0,r.Lz)(e.width):null,height:null!=e&&"object"==typeof e&&"height"in e?(0,r.Lz)(e.height):null}}function D(t,e){return t>e?"dark":"light"}async function A(t,e){const{shapeDescriptor:n,size:i,renderOptions:s,outputSize:h}=function(t,e){const n="number"==typeof e?.size?e?.size:null,i=null!=n?(0,r.Lz)(n):null,s=null!=e?.maxSize?(0,r.Lz)(e.maxSize):null;let a="angle"in t?t.angle:null;null!=e?.rotation&&(a=(a??0)+e.rotation);const o=(0,u.eH)(t);let h=(0,u.$4)(t);"dark"!==B(t,245)||e?.ignoreWhiteSymbols||(h={width:.75,...h,color:"#bdc3c7"});let l=null;const c={shape:null,fill:o,stroke:h,offset:[0,0]};h?.width&&(h.width=Math.min(h.width,w));const d=h?.width||0;let m=null!=e?.size&&(null==e?.scale||e?.scale),L=0,C=0,D=!1;switch(t.type){case v:{const n=t.style,{width:o,height:h}=_(e);let l=o===h&&null!=o?o:null!=i?i:Math.min((0,r.Lz)(t.size),s||E);if(!0===e?.useMarkerSymbolSize&&null!==o&&null!==h){const e=Math.min((0,r.Lz)(t.size),s||E);l=e>o&&e>h?Math.min(o,h):e}switch(L=l,C=l,n){case"circle":c.shape={type:"circle",cx:0,cy:0,r:.5*l},m||(L+=d,C+=d);break;case"cross":c.shape={type:"path",path:[{command:"M",values:[0,.5*C]},{command:"L",values:[L,.5*C]},{command:"M",values:[.5*L,0]},{command:"L",values:[.5*L,C]}]};break;case"diamond":c.shape={type:"path",path:[{command:"M",values:[0,.5*C]},{command:"L",values:[.5*L,0]},{command:"L",values:[L,.5*C]},{command:"L",values:[.5*L,C]},{command:"Z",values:[]}]},m||(L+=d,C+=d);break;case"square":c.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[L,0]},{command:"L",values:[L,C]},{command:"L",values:[0,C]},{command:"Z",values:[]}]},m||(L+=d,C+=d),a&&(D=!0);break;case"triangle":c.shape={type:"path",path:[{command:"M",values:[.5*L,0]},{command:"L",values:[L,C]},{command:"L",values:[0,C]},{command:"Z",values:[]}]},m||(L+=d,C+=d),a&&(D=!0);break;case"x":c.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[L,C]},{command:"M",values:[L,0]},{command:"L",values:[0,C]}]},a&&(D=!0);break;case"path":c.shape={type:"path",path:t.path||""},m||(L+=d,C+=d),a&&(D=!0),m=!0}break}case S:{const{width:t,height:n}=_(e),s=(0,u.O0)(h).reduce((t,e)=>t+e,0),a=s&&Math.ceil(b/s),o=n??i??d,r=t??(s*a||b);if(m=!0,"polyline"===e?.geometry?.type&&e?.geometry?.extent){L=r,C=n??L;const t=1e3,i=.15*t;l=[L,C],C=l[0]>l[1]?t*l[1]/l[0]:t,L=l[0]>l[1]?t:t*l[0]/l[1],h?.width&&(h.width=h.width*t/(l[1]>l[0]?l[1]:l[0]),h.width>i&&(h.width=i)),c.shape={type:"path",path:z(e.geometry,L,C)}}else L=null!=e?.maxSize?Math.min(r,e.maxSize):r,C=o,h&&(h.width=o),c.shape={type:"path",path:[{command:"M",values:[o/2,C/2]},{command:"L",values:[L-o/2,C/2]}]};break}case g:case y:{const t="object"==typeof e?.symbolConfig&&!!e?.symbolConfig?.isSquareFill,{width:n,height:s}=_(e);L=!t&&n!==s||null==n?null!=i?i:k:n,C=!t&&n!==s||null==s?L:s,m||(L+=d,C+=d),m=!0,e?.geometry?.extent&&"polygon"===e?.geometry?.type?(l=[L,C],C=l[0]>l[1]?1e3*l[1]/l[0]:1e3,L=l[0]>l[1]?1e3:1e3*l[0]/l[1],c.shape={type:"path",path:z(e.geometry,L,C)}):c.shape=t?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[L,0]},{command:"L",values:[L,C]},{command:"L",values:[0,C]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:p.nq.fill[0];break}case f:{const n=Math.min((0,r.Lz)(t.width),s||E),o=Math.min((0,r.Lz)(t.height),s||E),{width:h,height:l}=_(e),u=h===l&&null!=h?h:null!=i?i:Math.max(n,o),p=t.width/t.height;L=p<=1?Math.ceil(u*p):u,C=p<=1?u:Math.ceil(u/p),c.shape={type:"image",x:-Math.round(L/2),y:-Math.round(C/2),width:L,height:C,src:t.url||""},a&&(D=!0);break}case x:{const n=t,a=e?.overrideText||n.text||M,o=n.font,{width:h,height:l}=_(e),u=null!=l?l:null!=i?i:Math.min((0,r.Lz)(o.size),s||E),{width:p,height:d}=P(a,{weight:o.weight,size:u,family:o.family}),m=/[\uE600-\uE6FF]/.test(a);L=h??(m?u:p),C=m?u:d;let g=.5*(m?u:d);m&&(g+=5),c.shape={type:"text",text:a,x:n.xoffset||0,y:n.yoffset||g,align:"middle",alignBaseline:n.verticalAlignment,decoration:o&&o.decoration,rotated:n.rotated,kerning:n.kerning},c.font=o&&{size:u,style:o.style,decoration:o.decoration,weight:o.weight,family:o.family};break}}return{shapeDescriptor:c,size:[L,C],outputSize:l,renderOptions:{node:e?.node,scale:m,opacity:e?.opacity,rotations:[a],useRotationSize:D,cssEffectFilter:e?.cssEffectFilter,ariaLabel:e?.ariaLabel,clipBloomEffect:e?.clipBloomEffect}}}(t,e);if(!n.shape)throw new a.A("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(t,e){const n=e.fill,i=t.color;if("pattern"===n?.type&&i&&t.type!==g){const t=await(0,u.rc)(n.src,i.toCss(!0));n.src=t,e.fill=n}}(t,n),await async function(t,e,n,i){if(!("font"in t)||!t.font||"text"!==e.shape.type)return;try{await(0,o.Al)(t.font)}catch{}const{width:s,height:a}=_(i);if(!/[\uE600-\uE6FF]/.test(e.shape.text)){const{width:o,height:r,x:h,y:l}=P(e.shape.text,{weight:e.font?.weight,size:e.font?.size,family:e.font?.family});n[0]=s??o,n[1]=a??r,e.shape.x=h,e.shape.y=l;let c="angle"in t?t.angle:null;if(null!=i?.rotation&&(c=(c??0)+i.rotation),c){const t=c*(Math.PI/180),e=Math.abs(Math.sin(t)),i=Math.abs(Math.cos(t));n[1]=n[0]*e+n[1]*i}}}(t,n,i,e);const l=[[n]];if("object"==typeof e?.symbolConfig&&e?.symbolConfig?.applyColorModulation){const t=.6*i[0];l.unshift([{...n,offset:[-t,0],fill:(0,p.QC)(n.fill,-.3)}]),l.push([{...n,offset:[t,0],fill:(0,p.QC)(n.fill,.3)}]),i[0]+=2*t,s.scale=!1}"text"===t.type&&function(t,e,n,i,s){if(null!=t.haloColor&&null!=t.haloSize){s.masking??=n.map(()=>[]);const a=(0,r.Lz)(t.haloSize);i[0]+=a,i[1]+=a,n.unshift([{...e,fill:null,stroke:{color:t.haloColor,width:2*a,join:"round",cap:"round"}}]),s.masking.unshift([{shape:{type:"rect",x:0,y:0,width:i[0]+2*m.y7,height:i[1]+2*m.y7},fill:[255,255,255],stroke:null},{...e,fill:[0,0,0,0],stroke:null}])}null==t.backgroundColor&&null==t.borderLineColor||(i[0]+=2*m.y7,i[1]+=2*m.y7,n.unshift([{shape:{type:"rect",x:0,y:0,width:i[0],height:i[1]},fill:t.backgroundColor,stroke:{color:t.borderLineColor,width:(0,r.Lz)(t.borderLineSize)}}]),s.masking?.unshift([]))}(t,n,l,i,s);const c=(0,d.fz)(l,i,s);if(h&&c){const t="img"===c.nodeName.toLowerCase()?c:c.firstChild;"svg"===t.nodeName.toLowerCase()&&t.setAttribute("viewBox",`0 0 ${i[0].toString()} ${i[1].toString()}`),t.setAttribute("width",h[0].toString()),t.setAttribute("height",h[1].toString()),h.length>2&&(t.style.setProperty("padding-left",h[2]?.toString()+"px"),t.style.setProperty("padding-right",h[2]?.toString()+"px"),t.style.setProperty("padding-top",h[3]?.toString()+"px"),t.style.setProperty("padding-bottom",h[3]?.toString()+"px"),t.style.setProperty("box-sizing","border-box"))}return c}function B(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;const n=(0,u.eH)(t),a=(0,u.$4)(t),o=!n||"type"in n?null:new i.A(n),r=a?.color?new i.A(a?.color):null,h=o?D((0,s.Ws)(o),e):null,l=r?D((0,s.Ws)(r),e):null;return l?h?h===l?h:e>=L?"light":"dark":l:h}}}]);
//# sourceMappingURL=4088.bc855ed0.chunk.js.map