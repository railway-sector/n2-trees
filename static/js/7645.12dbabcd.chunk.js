"use strict";(self.webpackChunkn2_trees=self.webpackChunkn2_trees||[]).push([[7645],{12482:(e,t,n)=>{n.d(t,{$7:()=>_,B:()=>b,Fo:()=>w,M7:()=>M,Q5:()=>E,Tq:()=>k,Up:()=>R,XF:()=>I,Ze:()=>y,bK:()=>l,bh:()=>h,id:()=>x,ky:()=>f,qt:()=>Z,tW:()=>C,v9:()=>d,w7:()=>u,wF:()=>a,wS:()=>A,x:()=>p,xS:()=>S,ze:()=>c});var r=n(56002),i=n(31633),o=n(81478);function s(e){return e?Z:k}function a(e,t){return t?.mode?t.mode:s(e).mode}function l(e,t){return null!=t?t:s(e)}function u(e,t){return a(null==e||(e.hasZ??!1),t)}function c(e,t){return l(null==e||(e.hasZ??!1),t)}function f(e){const t=v(e);return u(e.geometry,t)}function h(e){const t=v(e),n=u(e.geometry,t),r=null!=t&&"on-the-ground"!==n?M(t):0,i=t?.featureExpressionInfo;return{mode:n,offset:r,featureExpressionInfo:i}}function d(e){return g(e)||p(e)}function p(e){return"0"===e?.featureExpressionInfo?.expression}function g(e){if(!e)return!1;if("on-the-ground"===e.mode)return!1;const t=e?.featureExpressionInfo?e.featureExpressionInfo.expression:null;return!(!t||"0"===t)}function v(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}const m=(0,r.B)((e,t,n)=>{if(!e)return 0;if("decimal-degrees"===t)return 0;const r="unknown"!==t&&t?t:"meters",o=(0,i.mq)(n);return o?(0,i.oU)(e,r,o):0});function y(e,t){return m(e?.offset,e?.unit,t)}function x(e,t,n){if(!n?.mode)return;const r=e.hasZ?e.z:0,i=y(n,e.spatialReference);switch(n.mode){case"absolute-height":return r-i;case"on-the-ground":return 0;case"relative-to-ground":return r-((t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"ground")??0)+i);case"relative-to-scene":return r-((t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"scene")??0)+i)}}function A(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return w(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,r)}function S(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return w(e,t[0],t[1],t.length>2?t[2]:0,n,r,i)}function w(e,t,n,r,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null==o)return;const a=null!=s?s.mode:"absolute-height";if("on-the-ground"===a)return 0;const{absoluteZ:l}=E(t,n,r,i,e,o);return function(e,t,n,r,i,o,s,a){const l=y(s,i);switch(a){case"absolute-height":return e-l;case"relative-to-ground":return e-((o.elevationProvider.getElevation(t,n,r,i,"ground")??0)+l);case"relative-to-scene":return e-((o.elevationProvider.getElevation(t,n,r,i,"scene")??0)+l)}}(l,t,n,r,i,e,s,a)}function E(e,t,n,r,i,o){const s=y(o,r);switch(o.mode){case"absolute-height":return{absoluteZ:n+s,elevation:0};case"on-the-ground":{const n=i.elevationProvider.getElevation(e,t,0,r,"ground")??0;return{absoluteZ:n,elevation:n}}case"relative-to-ground":{const o=i.elevationProvider.getElevation(e,t,n,r,"ground")??0;return{absoluteZ:n+o+s,elevation:o}}case"relative-to-scene":{const o=i.elevationProvider.getElevation(e,t,n,r,"scene")??0;return{absoluteZ:n+o+s,elevation:o}}}}function R(e,t){if(null==t)return!1;const{mode:n}=t;return null!=n&&("scene"===e&&"relative-to-scene"===n||"ground"===e&&"absolute-height"!==n)}function b(e,t,n){return n&&n.mode!==t?`${e} only support ${t} elevation mode`:null}function _(e,t,n){return n?.mode===t?`${e} do not support ${t} elevation mode`:null}function C(e,t){return null!=t?.featureExpressionInfo&&"0"!==t.featureExpressionInfo.expression?`${e} do not support featureExpressionInfo`:null}function I(e,t){t&&e.warn(".elevationInfo=",t)}function M(e){return(e?.offset??0)*(0,o.Ao)(e?.unit)}const Z={mode:"absolute-height",offset:0},k={mode:"on-the-ground",offset:null}},23456:(e,t,n)=>{n.d(t,{_8:()=>p,uB:()=>g});var r=n(15941),i=n(20664),o=n(9392),s=n(34111),a=n(76797),l=n(91605),u=n(13312),c=n(45308);function f(e,t){if(!Array.isArray(e)||e.length<t)return!1;for(const n of e)if("number"!=typeof n)return!1;return!0}const h=7645211,d={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850};new Map([[5773,new l.A({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM96_Geoid"})],[3855,new l.A({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM2008_Geoid"})],[115700,new l.A({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"WGS_1984"})],[115701,new l.A({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"ETRS_1989"})],[6360,new l.A({heightModel:"gravity-related-height",heightUnit:"us-feet",vertCRS:"NAVD88_height_(ftUS)"})],[7837,new l.A({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"DHHN2016_(height) "})]]);function p(e){return!(!(e.extensions?.ESRI_crs?.wkid||e.extensions?.ESRI_crs?.latestWkid||e.extensions?.ESRI_crs?.wkt)||!e.root?.extensions?.ESRI_crs?.boundingVolume?.box&&!e.root?.extensions?.ESRI_crs?.boundingVolume?.sphere)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new u.A({wkid:4326,vcsWkid:115700}),l=e.root?.boundingVolume,p=!1,g=e?.root?.transform;if(t&&(e.extensions?.ESRI_crs?.wkid||e.extensions?.ESRI_crs?.latestWkid||e.extensions?.ESRI_crs?.wkt)&&(e.root?.extensions?.ESRI_crs?.boundingVolume?.box||e.root?.extensions?.ESRI_crs?.boundingVolume?.sphere))n=new u.A(e.extensions?.ESRI_crs),l=e.root?.extensions?.ESRI_crs?.boundingVolume,g=e.root?.transform,p=!0;else if(!l)return new a.A(-180,-90,180,90,n);if(l.box){const e=l?.box;if(e[3]>h&&e[7]>h&&e[11]>h)return new a.A({...d,spatialReference:n})}const v=(0,o.vt)();if(!p&&l.region&&f(l.region,6)){const e=l.region,t=(0,r.KJ)(e[0]),i=(0,r.KJ)(e[1]),o=e[4],s=(0,r.KJ)(e[2]),u=(0,r.KJ)(e[3]),c=e[5];return new a.A({xmin:t,ymin:i,zmin:o,xmax:s,ymax:u,zmax:c,spatialReference:n})}if(l.sphere&&f(l.sphere,4)){const e=l.sphere,t=(0,o.fA)(e[0],e[1],e[2]),r=e[3]/Math.sqrt(3),h=(0,o.vt)();(0,i.e)(h,t,(0,o.fA)(r,r,r));const d=(0,o.vt)();if((0,i.g)(d,t,(0,o.fA)(r,r,r)),g&&f(g,16)){const e=g;(0,i.t)(v,h,e),(0,i.d)(h,v),(0,i.t)(v,d,e),(0,i.d)(d,v)}p||((0,c.projectBuffer)(h,s.Ro,0,h,u.A.WGS84,0),(0,c.projectBuffer)(d,s.Ro,0,d,u.A.WGS84,0));const m=(0,o.vt)(),y=(0,o.vt)();return(0,i.A)(m,h,d),(0,i.z)(y,h,d),new a.A({xmin:m[0],ymin:m[1],zmin:m[2],xmax:y[0],ymax:y[1],zmax:y[2],spatialReference:n})}if(l.box&&f(l.box,12)){const e=l.box,t=(0,o.fA)(e[0],e[1],e[2]),r=(0,o.fA)(e[3],e[4],e[5]),h=(0,o.fA)(e[6],e[7],e[8]),d=(0,o.fA)(e[9],e[10],e[11]),v=[];for(let n=0;n<8;++n)v.push((0,o.vt)());if((0,i.g)(v[0],t,r),(0,i.g)(v[0],v[0],h),(0,i.g)(v[0],v[0],d),(0,i.a)(v[1],t,r),(0,i.g)(v[1],v[1],h),(0,i.g)(v[1],v[1],d),(0,i.g)(v[2],t,r),(0,i.a)(v[2],v[2],h),(0,i.g)(v[2],v[2],d),(0,i.a)(v[3],t,r),(0,i.a)(v[3],v[3],h),(0,i.g)(v[3],v[3],d),(0,i.g)(v[4],t,r),(0,i.g)(v[4],v[4],h),(0,i.a)(v[4],v[4],d),(0,i.a)(v[5],t,r),(0,i.g)(v[5],v[5],h),(0,i.a)(v[5],v[5],d),(0,i.g)(v[6],t,r),(0,i.a)(v[6],v[6],h),(0,i.a)(v[6],v[6],d),(0,i.a)(v[7],t,r),(0,i.a)(v[7],v[7],h),(0,i.a)(v[7],v[7],d),g&&f(g,16)){const e=g;for(let t=0;t<8;++t)(0,i.t)(v[t],v[t],e)}const m=(0,o.fA)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),y=(0,o.fA)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let n=0;n<8;++n)p||(0,c.projectBuffer)(v[n],s.Ro,0,v[n],u.A.WGS84,0),(0,i.A)(y,y,v[n]),(0,i.z)(m,m,v[n]);return new a.A({xmin:y[0],ymin:y[1],zmin:y[2],xmax:m[0],ymax:m[1],zmax:m[2],spatialReference:n})}return new a.A(-180,-90,180,90,n)}},27645:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var r=n(6326),i=n(3825),o=n(50076),s=n(81806),a=n(76460),l=n(77717),u=n(50346),c=n(46053),f=(n(47249),n(87990)),h=n(76797),d=n(13312),p=n(25515),g=n(12406),v=n(19502),m=n(31362),y=n(11270),x=n(94729),A=n(5682),S=n(95363),w=n(23456),E=n(12482);let R=class extends((0,v.b)((0,y.q)((0,x.A)((0,A.j)((0,l.P)((0,m.d)((0,g.p)(p.A)))))))){constructor(e){super(e),this.operationalLayerType="GaussianSplatLayer",this.type="gaussian-splat",this.opacity=1,this.minScale=0,this.maxScale=0,this.url=null,this.rootTilesetJSON=null,this.fullExtent=new h.A(-180,-90,180,90,this.spatialReference),this.spatialReference=new d.A({wkid:4326,vcsWkid:115700}),this.esriCrsSpatialReference=null,this.esriCrsFullExtent=null}get supportedSpatialReferences(){return this.initialized&&this.esriCrsSpatialReference?[this.spatialReference,this.esriCrsSpatialReference]:[this.spatialReference]}get fullExtents(){return this.initialized&&this.esriCrsFullExtent?[this.fullExtent,this.esriCrsFullExtent]:[this.fullExtent]}set elevationInfo(e){null!=e&&"absolute-height"!==e.mode||this._set("elevationInfo",e),this._validateElevationInfo(e)}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const t=null!=e?e.signal:null;if(!(0,s.A)("enable-feature:gaussianSplatLayer"))throw new o.A("GaussianSplatLayer-init:not-supported","This layer is currently not supported.");try{await this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:e=>{if(e.typeKeywords?.includes("GaussianSplat"))return!0;throw new o.A("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service"})}},e)}catch(n){(0,u.QP)(n)}if(this.url){const e=(0,i.A)(this.url,{query:{...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e=>{this.rootTilesetJSON=e.data;const t=(0,w._8)(this.rootTilesetJSON);this.fullExtent=(0,w.uB)(this.rootTilesetJSON,!1),this.spatialReference=this.fullExtent.spatialReference,t&&(this.esriCrsFullExtent=(0,w.uB)(this.rootTilesetJSON,!0),this.esriCrsSpatialReference=this.esriCrsFullExtent.spatialReference)},e=>{(0,u.QP)(e)});await e}}_validateElevationInfo(e){const t="Gaussian Splat layers";(0,E.XF)(a.A.getLogger(this),(0,E.B)(t,"absolute-height",e)),(0,E.XF)(a.A.getLogger(this),(0,E.tW)(t,e))}};(0,r.Cg)([(0,c.MZ)({type:["GaussianSplatLayer"]})],R.prototype,"operationalLayerType",void 0),(0,r.Cg)([(0,c.MZ)({readOnly:!0})],R.prototype,"type",void 0),(0,r.Cg)([(0,c.MZ)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],R.prototype,"opacity",void 0),(0,r.Cg)([(0,c.MZ)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],R.prototype,"minScale",void 0),(0,r.Cg)([(0,c.MZ)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],R.prototype,"maxScale",void 0),(0,r.Cg)([(0,c.MZ)(S.OZ)],R.prototype,"url",void 0),(0,r.Cg)([(0,c.MZ)({type:h.A})],R.prototype,"fullExtent",void 0),(0,r.Cg)([(0,c.MZ)({type:d.A})],R.prototype,"spatialReference",void 0),(0,r.Cg)([(0,c.MZ)({readOnly:!0})],R.prototype,"supportedSpatialReferences",null),(0,r.Cg)([(0,c.MZ)({type:[h.A]})],R.prototype,"fullExtents",null),(0,r.Cg)([(0,c.MZ)({type:["show","hide"]})],R.prototype,"listMode",void 0),(0,r.Cg)([(0,c.MZ)(S.Yj)],R.prototype,"elevationInfo",null),R=(0,r.Cg)([(0,f.$)("esri.layers.GaussianSplatLayer")],R);const b=R},56002:(e,t,n)=>{function r(e){let t,n,r=[],i=!1;return function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return i&&t===this&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(s,r)||(n=e.apply(this,s),t=this,r=s,i=!0),n}}n.d(t,{B:()=>r})}}]);
//# sourceMappingURL=7645.12dbabcd.chunk.js.map