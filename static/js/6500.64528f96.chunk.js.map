{"version":3,"file":"static/js/6500.64528f96.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/mapCollectionUtils.js","../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingSourceInfo.js","../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingEngine.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{createTask as e}from\"./asyncUtils.js\";import t from\"./Collection.js\";import{destroyHandle as o,removeIfHandle as s}from\"./handleUtils.js\";import{ignoreAbortErrors as r,isAborted as n,createAbortError as i}from\"./promiseUtils.js\";import{on as a}from\"./reactiveUtils.js\";function c(e,o,s){const r=s?.createCollection?.()??new t,n=!!s?.recycleItems?new d:null,i=(e,t=0)=>{if(!e?.length)return;const o=r.splice(t,e.length);n?n.processRemoved(e):o.forEach(m)},c=(e,t=0)=>{if(!e?.length)return;const s=[];for(const r of e){const e=n?.use(r);if(e)s.push(e);else{const e=o(r);n?.register(r,e),s.push(e)}}r.addMany(s,t)},l=a(e,\"after-splice\",(({added:e,start:t,removed:o})=>{i(o,t),c(e,t)}),{sync:!0,onListenerRemove:e=>i(e.items),onListenerAdd:e=>c(e.items)});return r.addHandles(l),r}class d{constructor(){this._originalToMapped=new Map,this._removedItemCandidates=new Set,this._garbageCollectionQueued=!1}processRemoved(e){if(!e?.length)return;const{_removedItemCandidates:t}=this;for(const o of e)this._getItem(o)?.markRemoved()&&(t.add(o),this._queueGarbageCollection())}use(e){const t=this._getItem(e);return t&&(t.removed=!1),t?.item}register(e,t){this._originalToMapped.set(e,new l(t))}_getItem(e){return this._originalToMapped.get(e)}_queueGarbageCollection(){this._garbageCollectionQueued||(this._garbageCollectionQueued=!0,queueMicrotask((()=>this._garbageCollectCandidates())))}_garbageCollectCandidates(){this._garbageCollectionQueued=!1;const{_removedItemCandidates:e}=this,t=Array.from(e);e.clear(),t.forEach((e=>this._garbageCollectIfRemoved(e)))}_garbageCollectIfRemoved(e){const{_originalToMapped:t}=this,o=this._getItem(e);o?.removed&&(m(o.item),t.delete(e))}}class l{constructor(e){this.item=e,this.removed=!1}markRemoved(){return this.removed=!0,!0}}function m(e){\"object\"==typeof e&&e&&(\"destroy\"in e&&\"function\"==typeof e.destroy?e.destroy():s(e))}function u(s,a,d){const l=new t,u=c(s,(t=>e((async e=>{const o=await a(t,e);if(n(e))throw m(o),i();return o}))),d),f=()=>null,g=async e=>{const t=await e.promise,o=u.indexOf(e);o<0||l.splice(o,1,t)};l.addMany(u.items.map(f));for(const e of u)r(g(e));const h=u.on(\"after-splice\",(({added:e,start:t,deleteCount:o})=>{const s=l.splice(t,o);for(const r of s)m(r);if(e?.length){l.addMany(e.map(f),t);for(const t of e)r(g(t))}}));return l.addHandles([o(u),h]),l}export{c as mapCollection,u as mapCollectionAsync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import has from\"../../../core/has.js\";import r from\"../../../core/Logger.js\";import{watch as i,syncAndInitial as l}from\"../../../core/reactiveUtils.js\";import{sqlAnd as s}from\"../../../core/sql.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../layers/support/FeatureFilter.js\";import{getFloorFilterClause as u}from\"../../../layers/support/floorFilterUtils.js\";import{isSubtypeGroupLayer as p,isFeatureLayer as d}from\"../../../layers/support/layerUtils.js\";import{isUtilityNetworkWebMap as c}from\"./snappingUtils.js\";import{scaleBoundsPredicate as y}from\"../../support/layerViewUtils.js\";let f=class extends t{set attributeRulesEnabled(e){this._set(\"attributeRulesEnabled\",e),e&&this.loadRules()}get layerView(){return this.view?.allLayerViews?.find((e=>e.layer===this.layer))}get valid(){const{_valid:e,snappingSource:t,layer:r}=this;return!(!t||!r)&&e}get subtypeFilter(){const{layer:e,snappingSource:t}=this;if(!p(e)||!e.subtypes?.length||!t)return{mode:\"not-in-use\",filter:null};const r=t.layerSource.sublayerSources.filter((e=>e.enabled&&e.layer.visible&&y(this.view?.scale,e.layer.effectiveScaleRange.minScale,e.layer.effectiveScaleRange.maxScale))).map((e=>e.layer.subtypeCode));if(!r.length)return{mode:\"none-visible\",filter:null};if(r.length===e.subtypes.length)return{mode:\"all-visible\",filter:null};const i=e.fieldsIndex.get(e.subtypeField)?.name??e.subtypeField;return 1===r.length?{mode:\"in-use\",filter:`${i} = ${r.getItemAt(0)}`}:{mode:\"in-use\",filter:`${i} IN (${r.join(\", \")})`}}get floorFilter(){const{view:e,layer:t}=this;return e&&t?u({view:e,layer:t}):null}constructor(e){super(e),this.layer=null,this.snappingSource=null,this.rulesTable=null,this._valid=null}initialize(){if(!this.snappingSource||!this.layer)return void(this._valid=!1);const{layer:e,snappingSource:t}=this;if(\"refresh\"in e){const r=e;this.addHandles(r.on(\"refresh\",(()=>t.refresh())))}this.loadRules(),this.addHandles([i((()=>t.updating),(e=>t.layerSource.updating=e),l),i((()=>t.availability),(e=>t.layerSource.availability=e),l)])}getFetchCandidatesParameters(e,t,r){if(!this.valid)return[];const{layer:i,layerView:l,floorFilter:o,rulesTable:a,subtypeFilter:u}=this,y={distance:r,mode:this.view?.type??\"2d\",point:e,coordinateHelper:t.coordinateHelper,...h(),filter:l&&\"filter\"in l?l.filter:null};if(o&&(y.filter=m(y.filter,o)),\"not-in-use\"!==u.mode&&\"all-visible\"!==u.mode){if(\"none-visible\"===u.mode)return[];y.filter?y.filter.where=s(y.filter.where,u.mode):y.filter=new n({where:u.filter})}if(!this.attributeRulesEnabled)return[y];const f=t.feature,v=\"subtype-sublayer\"===f?.sourceLayer?.type?f.sourceLayer.parent:f?.sourceLayer;if(a&&f&&c(this.view?.map)&&(d(i)||p(i))&&(d(v)||p(v))&&this.view.map.utilityNetworks?.find((e=>e.isUtilityLayer(v)))){if(\"loaded\"!==a.loadStatus)return[];const e=[],t=i.layerId,r=a.getFeatureSQL(v,f)?.[t];if(!r)return[];const l=r.anyVertex;let s=r.endVertex;return s&&l&&s===l&&(s=\"\"),s&&e.push({...y,returnEdge:!1,vertexMode:\"ends\",filter:m(y.filter,s)}),l&&e.push({...y,returnEdge:has(\"snapping-include-edges-when-applying-any-vertex-rule\")??!1,vertexMode:\"all\",filter:m(y.filter,l)}),e}return[y]}async loadRules(){this._valid=null;const{layer:e,view:t,attributeRulesEnabled:i}=this;if(i&&e&&t&&c(t?.map)&&(d(e)||p(e)))try{await Promise.allSettled(t.map.utilityNetworks?.map((e=>e.load()))??[]);const r=t.map.utilityNetworks?.find((t=>t.isUtilityLayer(e)));r&&(this.rulesTable=await r.getRulesTable(),await(this.rulesTable?.load()))}catch(l){return this._valid=!1,void r.getLogger(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\").error(\"Failed to load rules table for snapping source\",e.title)}this._valid=!0}remove(){this.destroy()}destroy(){this.snappingSource?.destroy()}};function h(){return{returnEdge:!0,vertexMode:\"all\"}}function m(e,t){return null==e?new n({where:t}):e.where?new n({where:s(e.where,t)}):new n({where:t})}e([o({constructOnly:!0})],f.prototype,\"layer\",void 0),e([o({constructOnly:!0})],f.prototype,\"snappingSource\",void 0),e([o({constructOnly:!0})],f.prototype,\"view\",void 0),e([o({value:!1})],f.prototype,\"attributeRulesEnabled\",null),e([o()],f.prototype,\"layerView\",null),e([o()],f.prototype,\"rulesTable\",void 0),e([o()],f.prototype,\"valid\",null),e([o()],f.prototype,\"subtypeFilter\",null),e([o()],f.prototype,\"floorFilter\",null),e([o()],f.prototype,\"_valid\",void 0),f=e([a(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\")],f);export{f as FeatureSnappingSourceInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import{destroyHandle as a}from\"../../../core/handleUtils.js\";import\"../../../core/has.js\";import{mapCollectionAsync as n}from\"../../../core/mapCollectionUtils.js\";import{allSettledValues as s,throwIfAborted as o}from\"../../../core/promiseUtils.js\";import{watch as i,sync as c}from\"../../../core/reactiveUtils.js\";import{getMetersPerUnitForSR as u,getMetersPerVerticalUnitForSR as l}from\"../../../core/unitUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{squaredDistance as m}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{c as g,s as h}from\"../../../chunks/vec32.js\";import{create as S}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getEpsilon as f}from\"../../../core/libs/gl-matrix-2/math/common.js\";import{UpdatingHandles as y}from\"../../../core/support/UpdatingHandles.js\";import{absoluteHeightElevationInfo as _}from\"../../../support/elevationInfoUtils.js\";import{VerticalHalfPlaneConstraint as v}from\"../sketch/constraints.js\";import{fromAnyMapPoint as w,asVec2 as j,markAsTarget as F}from\"../sketch/normalizedPoint.js\";import{FeatureSnappingSourceInfo as b}from\"./FeatureSnappingSourceInfo.js\";import{SnappingDomain as x}from\"./SnappingDomain.js\";import{sortCandidatesInPlace as C,screenDistance as R}from\"./snappingUtils.js\";import{DrapedEdgeSnappingCandidate as E}from\"./candidates/DrapedEdgeSnappingCandidate.js\";import{EdgeSnappingCandidate as M}from\"./candidates/EdgeSnappingCandidate.js\";import{FeatureSnappingCandidate as L}from\"./candidates/FeatureSnappingCandidate.js\";import{RightAngleSnappingCandidate as I,OtherVertexType as G}from\"./candidates/RightAngleSnappingCandidate.js\";import{vectorToScreenPoint as H}from\"../support/viewUtils.js\";let P=class extends t{get updating(){return this._snappingSources.some((e=>null==e?.valid||!0===e.valid&&!0===e.snappingSource?.updating))||this._updatingHandles.updating}constructor(e){super(e),this.options=null,this._domain=x.FEATURE,this._updatingHandles=new y,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){const e=n((()=>this.options?._effectiveFeatureSources),((e,t)=>this._createSourceInfo(e,t)));this._snappingSources=e,this.addHandles([a(e),i((()=>({rulesEnabled:!!this.options?.attributeRulesEnabled,sources:this._snappingSources.filter(r)})),(({rulesEnabled:e,sources:t})=>{for(const r of t)r.attributeRulesEnabled=e}),c)])}destroy(){this._set(\"options\",null),this._updatingHandles.destroy()}async fetchCandidates(e,t,r,a){if(!(t&this._domain&&null!=this.options&&this.options.effectiveFeatureEnabled))return[];const n=[],i=this._computeScreenSizeDistanceParameters(e,r);for(const s of this._snappingSources){if(!s?.valid||!s.snappingSource?.layerSource?.enabled||s.layerView?.suspended)continue;const t=s.getFetchCandidatesParameters(e,r,i);for(const e of t)n.push(s.snappingSource.fetchCandidates(e,a).then((e=>e.filter((e=>!this._candidateIsExcluded(s.snappingSource,e,r.excludeFeature))))))}const c=(await s(n)).flat();return this._addRightAngleCandidates(c,e,i,r),o(a),C(e,c),c}_addRightAngleCandidates(e,t,r,a){const n=null!=a.vertexHandle?a.vertexHandle.rightEdge?.rightVertex?.pos:null!=a.editGeometryOperations&&\"polygon\"===a.editGeometryOperations.data.type?a.editGeometryOperations.data.components[0]?.getFirstVertex()?.pos:null,s=null!=a.vertexHandle?a.vertexHandle.leftEdge?.leftVertex?.pos:null!=a.editGeometryOperations?a.editGeometryOperations.data.components[0]?.getLastVertex()?.pos:null,{view:o}=this,i=w(n,o,a),c=w(s,o,a),u=e.length;for(let l=0;l<u;l++)this._addRightAngleCandidate(e[l],c,t,r,e),this._addRightAngleCandidate(e[l],i,t,r,e)}_addRightAngleCandidate(e,t,r,a,n){if(null==t||!U(e))return;const s=e.constraint.closestTo(t),o=(s[0]-r[0])/a.x,i=(s[1]-r[1])/a.y,{start:c,end:u}=e.constraint;if(o*o+i*i<=1){const r=m(j(s),j(c))>m(j(s),j(u))?c:u,a=new I({targetPoint:F(s),otherVertex:t,otherVertexType:G.NEXT,previousVertex:r,constraint:new v(t,s),objectId:e.objectId,isDraped:e.isDraped,domain:x.FEATURE});n.push(a)}}_computeScreenSizeDistanceParameters(e,t){let r=null!=this.options?this.options.distance*(\"touch\"===t.pointer?this.options.touchSensitivityMultiplier:1):0;return null==this.view?{x:r,y:r,z:r,distance:r}:\"2d\"===this.view.type?(r*=this.view.resolution,{x:r,y:r,z:r,distance:r}):this._computeScreenSizeDistanceParameters3D(e,r,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,r,a){const{spatialReference:n}=a;r.renderCoordsHelper.toRenderCoords(e,n,D);const s=r.state.camera.computeScreenPixelSizeAt(D),o=s*r.renderCoordsHelper.unitInMeters,i=o/u(n),c=o/l(n),p=t*i,d=t*c,m=H(e,n,_,r),g=m?z(m,e,i,0,0,r,a):0,h=m?z(m,e,0,i,0,r,a):0,S=m?z(m,e,0,0,c,r,a):0;return{x:0===g?0:p/g,y:0===h?0:p/h,z:0===S?0:d/S,distance:s*t}}_candidateIsExcluded(e,t,r){if(null==r)return!1;const a=this._getCandidateObjectId(t);if(null==a)return!1;const n=e.layerSource.layer;return\"graphics\"===n.type?r.uid===a:r.sourceLayer===n&&(!(!r.attributes||!(\"objectIdField\"in n))&&r.attributes[n.objectIdField]===a)}_getCandidateObjectId(e){return e instanceof L?e.objectId:null}async _createSourceInfo(e,t){const r=e.layer;r.loaded||(await r.load(),o(t));const{view:a}=this,n=await this._createFeatureSnappingSourceType(e);return o(t),new b(null==n?{}:{snappingSource:n,view:a,layer:r})}async _createFeatureSnappingSourceType(e){switch(e.layer.type){case\"feature\":case\"geojson\":case\"csv\":case\"oriented-imagery\":case\"subtype-group\":case\"wfs\":return this._createFeatureSnappingSourceFeatureLayer(e);case\"graphics\":return this._createFeatureSnappingSourceGraphicsLayer(e);case\"map-notes\":return this._createFeatureSnappingSourceMapNotesLayer(e);case\"scene\":case\"building-scene\":return this._createFeatureSnappingSourceSceneLayer(e)}return null}async _createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;if(null==t||\"3d\"!==t.type)return null;return new((await this._getSourceModule(\"scene\")).SceneLayerSnappingSource)({layerSource:e,view:t})}async _createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source?.type){case\"feature-layer\":case\"oriented-imagery\":return new((await this._getSourceModule(\"featureService\")).FeatureServiceSnappingSource)({spatialReference:this.spatialReference,view:this.view,layerSource:e});case\"memory\":case\"csv\":case\"geojson\":case\"wfs\":if(\"mesh\"===e.layer.geometryType)return null;return new((await this._getSourceModule(\"featureCollection\")).FeatureCollectionSnappingSource)({layerSource:e,view:this.view})}return null}async _createFeatureSnappingSourceGraphicsLayer(e){return new((await this._getSourceModule(\"graphics\")).GraphicsSnappingSource)({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _createFeatureSnappingSourceMapNotesLayer(e){return new((await this._getSourceModule(\"notes\")).GraphicsSnappingSource)({getGraphicsLayers:()=>e.layer.sublayers?.toArray()??[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _getSourceModule(e){const t=this._sourceModules[e];if(null==t.loader){const t=this._loadSourceModule(e),r={module:null,loader:t};this._sourceModules[e]=r;const a=await t,n={module:a,loader:t};return this._sourceModules[e]=n,a}return null==t.module?t.loader:t.module}_loadSourceModule(e){const t=this._updatingHandles;switch(e){case\"featureService\":return t.addPromise(import(\"./featureSources/FeatureServiceSnappingSource.js\"));case\"featureCollection\":return t.addPromise(import(\"./featureSources/FeatureCollectionSnappingSource.js\"));case\"graphics\":case\"notes\":return t.addPromise(import(\"./featureSources/GraphicsSnappingSource.js\"));case\"scene\":return t.addPromise(import(\"./featureSources/SceneLayerSnappingSource.js\"))}}get test(){}};function U(e){return(e instanceof M||e instanceof E)&&!A(e)}function A({constraint:{start:e,end:t}}){const r=h(e,t),a=m(j(e),j(t));return r<f()||a/r<T}function z(e,t,r,a,n,s,{spatialReference:o}){const i=g(O,t);i[0]+=r,i[1]+=a,i[2]+=n;const c=H(i,o,_,s);return c?R(c,e):1/0}e([p({constructOnly:!0})],P.prototype,\"spatialReference\",void 0),e([p({constructOnly:!0})],P.prototype,\"view\",void 0),e([p()],P.prototype,\"options\",void 0),e([p({readOnly:!0})],P.prototype,\"updating\",null),e([p()],P.prototype,\"_snappingSources\",void 0),P=e([d(\"esri.views.interactive.snapping.FeatureSnappingEngine\")],P);const D=S(),O=S(),T=1e-4;export{P as FeatureSnappingEngine};\n"],"names":["c","e","o","s","r","createCollection","t","n","recycleItems","d","i","arguments","length","undefined","splice","processRemoved","forEach","m","use","push","register","addMany","l","a","_ref","added","start","removed","sync","onListenerRemove","items","onListenerAdd","addHandles","constructor","this","_originalToMapped","Map","_removedItemCandidates","Set","_garbageCollectionQueued","_getItem","markRemoved","add","_queueGarbageCollection","item","set","get","queueMicrotask","_garbageCollectCandidates","Array","from","clear","_garbageCollectIfRemoved","delete","destroy","f","attributeRulesEnabled","_set","loadRules","layerView","view","allLayerViews","find","layer","valid","_valid","snappingSource","subtypeFilter","p","subtypes","mode","filter","layerSource","sublayerSources","enabled","visible","y","scale","effectiveScaleRange","minScale","maxScale","map","subtypeCode","fieldsIndex","subtypeField","name","getItemAt","join","floorFilter","u","super","rulesTable","initialize","on","refresh","updating","availability","getFetchCandidatesParameters","distance","type","point","coordinateHelper","returnEdge","vertexMode","where","feature","v","sourceLayer","parent","utilityNetworks","isUtilityLayer","loadStatus","layerId","getFeatureSQL","anyVertex","endVertex","has","Promise","allSettled","load","getRulesTable","getLogger","error","title","remove","constructOnly","prototype","value","P","_snappingSources","some","_updatingHandles","options","_domain","x","FEATURE","_sourceModules","featureService","module","loader","featureCollection","graphics","notes","scene","async","g","promise","indexOf","h","_ref2","deleteCount","_effectiveFeatureSources","_createSourceInfo","rulesEnabled","sources","fetchCandidates","effectiveFeatureEnabled","_computeScreenSizeDistanceParameters","suspended","then","_candidateIsExcluded","excludeFeature","flat","_addRightAngleCandidates","C","vertexHandle","rightEdge","rightVertex","pos","editGeometryOperations","data","components","getFirstVertex","leftEdge","leftVertex","getLastVertex","w","_addRightAngleCandidate","M","E","constraint","end","j","T","A","U","closestTo","I","targetPoint","F","otherVertex","otherVertexType","G","NEXT","previousVertex","objectId","isDraped","domain","pointer","touchSensitivityMultiplier","z","resolution","_computeScreenSizeDistanceParameters3D","spatialReference","renderCoordsHelper","toRenderCoords","D","state","camera","computeScreenPixelSizeAt","unitInMeters","H","_","S","_getCandidateObjectId","uid","attributes","objectIdField","L","loaded","_createFeatureSnappingSourceType","b","_createFeatureSnappingSourceFeatureLayer","_createFeatureSnappingSourceGraphicsLayer","_createFeatureSnappingSourceMapNotesLayer","_createFeatureSnappingSourceSceneLayer","_getSourceModule","SceneLayerSnappingSource","source","FeatureServiceSnappingSource","geometryType","FeatureCollectionSnappingSource","GraphicsSnappingSource","getGraphicsLayers","sublayers","toArray","_loadSourceModule","addPromise","test","_ref3","O","R","readOnly"],"sourceRoot":""}