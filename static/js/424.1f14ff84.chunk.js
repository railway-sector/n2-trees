"use strict";(self.webpackChunkn2_trees=self.webpackChunkn2_trees||[]).push([[424],{58043:(e,t,s)=>{s.d(t,{default:()=>Ke});var i=s(6326),l=s(63241),r=s(76460),a=s(68134),n=s(46053),o=s(21403),c=(s(81806),s(47249),s(87990)),d=s(25329),p=s(74061);s(11265);const h="esri-legend--card",y="esri-legend",m={activated:`${h}__carousel-indicator--activated`,base:h,stacked:`${y}--stacked`,carouselTitle:`${h}__carousel-title`,indicator:`${h}__carousel-indicator`,intervalSeparator:`${h}__interval-separator`,imageryLayerStretchedImage:`${h}__imagery-layer-image--stretched`,imageLabel:`${h}__image-label`,layerCaption:`${h}__layer-caption`,labelElement:`${h}__label-element`,layerRow:`${h}__layer-row`,labelCell:`${h}__label-cell`,message:`${h}__message`,rampLabel:`${h}__ramp-label`,section:`${h}__section`,relationshipSection:`${h}__relationship-section`,serviceCaptionText:`${h}__service-caption-text`,serviceContent:`${h}__service-content`,service:`${h}__service`,groupLayer:`${h}__group-layer`,groupLayerChild:`${h}__group-layer-child`,symbol:`${h}__symbol`,sizeRampRow:`${h}__size-ramp-row`,symbolRow:`${h}__symbol-row`,symbolCell:`${h}__symbol-cell`,carousel:`${h}__carousel`,carouselItem:`${h}__carousel-item`,indicatorContainer:`${h}__carousel-indicator-container`,intervalSeparatorsContainer:`${h}__interval-separators-container`,relationshipLabelContainer:`${h}__relationship-label-container`,labelContainer:`${h}__label-container`,serviceCaptionContainer:`${h}__service-caption-container`,symbolContainer:`${h}__symbol-container`,colorRampContainer:`${h}__color-ramp-container`,sizeRampContainer:`${h}__size-ramp-container`,sizeRampPreview:`${h}__size-ramp-preview`,pieChartRampPreview:`${h}__pie-chart-ramp-preview`,rampContainer:`${y}__ramps`,sizeRampHorizontal:`${y}__size-ramp--horizontal`,rampLabelsContainer:`${y}__ramp-labels`,layerInfo:`${y}__layer-cell ${y}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};var g=s(69539),v=s(66984),u=s(88685),f=s(39348),b=s(50265);function w(e){e.appendChild(this)}function L(e,t,s){if(!t)return;if("number"==typeof t)return t;if("string"==typeof t)return(0,u._e)(t);if("value"in t||"unit"in t)return(0,f.V)(e.dotValue,t);if("colorName"in t&&"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:void 0;let i=null;return s?i=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:_(t,s)&&(i=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),i?(0,f.V)("showField"===i?"{field}":e[i],{field:t.field,normField:t.normField}):void 0}function _(e,t){return!t}function C(e,t){return!!(t&&"Stretched"===t&&"version"in e&&"number"==typeof e.version&&e.version>=10.3&&"esri.layers.ImageryLayer"===e.declaredClass)}function $(e,t,s){switch(t){case"heatmap-ramp":return s[e.label]||e.label;case"stretch-ramp":return function(e,t){return e.label?t[e.label]+": "+("string"==typeof e.value?e.value:(0,b.ZV)(e.value??0,{style:"decimal",notation:e.value?.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}(e,s);default:return e.label}}function E(e,t){if(!e.title||"string"==typeof e.title)return e.title;const s="color-ramp"===e.type||"opacity-ramp"===e.type,i=e.title,l=L(t,i,s);return _(0,s)&&i.title?`${i.title} (${l})`:l}function K(e){return!(!e||"object"!=typeof e)}function k(e,t){const s=L(e,t,!1),i=s?e.previewTemplateAriaLabel:e.previewAriaLabel;return(0,f.V)(i,{label:s})}var R=s(15187),M=s(54761);let x=class extends d.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return(0,M.K)("div",{class:this.classes(m.layerRow,m.colorRampContainer)},this._renderRampLabel(e[0]),(0,M.K)("div",{class:m.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){const{opacity:t}=this,s="heatmap-ramp"===this.legendElement.type,i=e.length-1,l=25,r=i>2&&!s?25*i:100,a=r+20,n=10,o=[[{shape:{type:"path",path:"M0 12.5 L10 0 L10 25 Z"},fill:e[0].color,stroke:{width:0}},{shape:{type:"rect",x:n,y:0,width:r,height:l},fill:{type:"linear",x1:n,y1:0,x2:r+n,y2:0,colors:e.map((e,t)=>({color:e.color,offset:s&&"ratio"in e?e.ratio:t/i}))},stroke:{width:0}},{shape:{type:"path",path:`M${r+n} 0 L${a} 12.5 L${r+n} 25 Z`},fill:e[e.length-1].color,stroke:{width:0}}]],c=(0,v.d8)(o,a,l),d={filter:this.cssEffectFilter??void 0,opacity:null==t?void 0:`${t}`};return(0,M.K)("div",{styles:d},c)}_renderMiddleStopRampLabel(e){const t=e.length%2!=0?e[e.length/2|0]:null;return t?(0,M.K)("div",{class:m.intervalSeparatorsContainer},(0,M.K)("div",{class:m.intervalSeparator},"|"),this._renderRampLabel(t)):null}_renderRampLabel(e){return(0,M.K)("div",{class:m.rampLabel},$(e,this.legendElement.type,this.messages))}};(0,i.Cg)([(0,n.MZ)()],x.prototype,"cssEffectFilter",void 0),(0,i.Cg)([(0,n.MZ)()],x.prototype,"legendElement",void 0),(0,i.Cg)([(0,n.MZ)()],x.prototype,"messages",void 0),(0,i.Cg)([(0,n.MZ)()],x.prototype,"opacity",void 0),x=(0,i.Cg)([(0,c.$)("esri.widgets.Legend.styles.card.ColorRamp")],x);var z=s(76931);const I="#ddd",A=window.devicePixelRatio,F="esri-spike-ramp",Z={spikeRampContainer:`${F}__container`,spikeRampPreviewContainer:`${F}__preview-container`,spikeRampPreview:`${F}__preview`,spikeRampSymbolPreview:`${F}__symbol-preview`,spikeRampLines:`${F}__lines`,spikeRampLabelsContainer:`${F}__labels-container`,spikeRampLabel:`${F}__label`};function S(e){return 5!==e.infos.length?null:(0,M.K)("div",{class:Z.spikeRampContainer},(0,M.K)("div",{class:Z.spikeRampPreviewContainer},function(e){const[t,s,i]=T(e).map(e=>{let{preview:t}=e;if(!t)return null;const s=t.cloneNode(!0);return s.classList.add(Z.spikeRampSymbolPreview),s});return t&&s&&i?(0,M.K)("div",{class:Z.spikeRampPreview},(0,M.K)("div",{afterCreate:w,bind:i}),(0,M.K)("div",{afterCreate:w,bind:s}),(0,M.K)("div",{afterCreate:w,bind:t})):null}(e),function(e){const[{width:t,height:s},{width:i},{width:l,height:r}]=T(e).map(e=>{let{size:t}=e;return K(t)?{width:(0,z.Lz)(t.width),height:(0,z.Lz)(t.height)}:{width:0,height:0}}),a=10,n=8,o=t+i+l+3*a,c=s,d=document.createElement("canvas");d.width=(o+a)*A,d.height=c*A,d.style.width=d.width/A+"px",d.style.height=d.height/A+"px";const p=d.getContext("2d");p.beginPath();const h=o-(t/2+a),y=0,m=o+n,g=0;p.moveTo(h*A,y*A),p.lineTo(m*A,g*A);const v=(o-n)/2,u=(s-r)/2,f=o+n,b=(s-r)/2;p.moveTo(v*A,u*A),p.lineTo(f*A,b*A);const L=l/2,_=c-r,C=o+n,$=c-r;return p.moveTo(L*A,_*A),p.lineTo(C*A,$*A),p.strokeStyle=I,p.lineWidth=.5*A,p.stroke(),(0,M.K)("div",{afterCreate:w,bind:d,class:Z.spikeRampLines})}(e)),function(e){const[{label:t,height:s},{label:i},{label:l,height:r}]=T(e).map(e=>{let{label:t,size:s}=e;return{label:t,height:K(s)?(0,z.Lz)(s.height):0}}),a=s-r,n={position:"absolute",top:"0"},o={position:"absolute",top:a/2+"px"},c={position:"absolute",top:`${a}px`};return(0,M.K)("div",{class:Z.spikeRampLabelsContainer},(0,M.K)("div",{class:Z.spikeRampLabel,styles:n},t),(0,M.K)("div",{class:Z.spikeRampLabel,styles:o},i),(0,M.K)("div",{class:Z.spikeRampLabel,styles:c},l))}(e))}function T(e){return e.infos.filter((e,t)=>t%2==0)}const V=window.devicePixelRatio;let P=class extends d.A{constructor(e,t){super(e,t),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if("spike"===this.legendElement.theme)return(0,M.K)("div",{styles:{display:"flex",flex:"1",justifyContent:"center"}},S(this.legendElement));const{legendElement:e,hasIndicators:t,opacity:s}=this,i=e.infos,l=i.at(0),r=i.at(-1);if(!l||!r)return null;const{label:a,...n}=l,{label:o,...c}=r;let d=n.preview,p=c.preview;const h={"flex-direction":t?"column":"row-reverse"};if(!d||!p)return null;d=d.cloneNode(!0),d.style.display="flex",p=p.cloneNode(!0),p.style.display="flex";const y={opacity:`${s??""}`};return(0,M.K)("div",{class:this.classes(m.layerRow,{[m.sizeRampRow]:t})},(0,M.K)("div",{class:m.rampLabel},t?a:o),(0,M.K)("div",{class:m.sizeRampContainer,styles:h},(0,M.K)("div",{afterCreate:w,bind:d,class:m.sizeRampPreview,styles:y}),this._renderSizeRampLines(e),(0,M.K)("div",{afterCreate:w,bind:p,class:m.sizeRampPreview,styles:y})),(0,M.K)("div",{class:m.rampLabel},t?o:a))}_renderSizeRampLines(e){const t=e.infos,s=t.at(0),i=t.at(-1);if(!s||!i)return null;const l=s.symbol,r=this.hasIndicators,a=s.size&&"number"==typeof s.size?s.size:0,n=i.size&&"number"==typeof i.size?i.size:0,o=s.outlineSize||0,c=i.outlineSize||0,d=(0,z.Lz)(a+o)*V,p=(0,z.Lz)(n+c)*V,h=r?d:d+50*V,y=r?d/2+50*V:d,m=function(e){if(e){if(e.type.includes("3d")){if(!e.symbolLayers?.length)return;const t=e.symbolLayers.at(-1),s=t?.resource?.primitive;return"triangle"===s||"cone"===s||"tetrahedron"===s}return"triangle"===e.style}}(l),g=function(e){if(!e)return;if(e.type.includes("3d")){if(!e.symbolLayers?.length)return;const t=e.symbolLayers.at(-1),s=t.resource?.primitive;return"circle"===s||"cross"===s||"kite"===s||"sphere"===s||"cube"===s||"diamond"===s}const t=e.style;return"circle"===t||"diamond"===t||"cross"===t}(l),v=document.createElement("canvas");v.width=h,v.height=y,v.style.width=v.width/V+"px",v.style.height=v.height/V+"px";const u=v.getContext("2d");if(r){u.beginPath();const e=0,t=0,s=h/2-p/2,i=y;u.moveTo(e,t),u.lineTo(s,i);const l=h,r=0,a=h/2+p/2,n=y;u.moveTo(l,r),u.lineTo(a,n)}else{u.beginPath();const e=0,t=y/2-p/2,s=h,i=0;u.moveTo(e,t),u.lineTo(s,i);const l=0,r=y/2+p/2,a=h,n=y;u.moveTo(l,r),u.lineTo(a,n)}return u.strokeStyle="#ddd",u.stroke(),(0,M.K)("div",{afterCreate:w,bind:v,styles:r?{display:"flex",marginTop:`-${m?0:g?d/2:0}px`,marginBottom:`-${m?p:g?p/2:0}px`}:{display:"flex",marginRight:`-${m?0:g?d/2:0}px`,marginLeft:`-${m?0:g?p/2:0}px`}})}};(0,i.Cg)([(0,n.MZ)()],P.prototype,"hasIndicators",void 0),(0,i.Cg)([(0,n.MZ)()],P.prototype,"legendElement",void 0),(0,i.Cg)([(0,n.MZ)()],P.prototype,"messages",void 0),(0,i.Cg)([(0,n.MZ)()],P.prototype,"opacity",void 0),P=(0,i.Cg)([(0,c.$)("esri.widgets.Legend.styles.card.SizeRamp")],P);s(27347);var B=s(48396),D=s(85632),N=s(8503);const O=(0,B.F)(),H="esri-univariate-above-and-below-ramp__symbol",q="esri-legend__color-ramp";function j(){const e="stroke:rgb(200, 200, 200);stroke-width:1";return"vertical"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vertical")?(0,M.K)("svg",{height:"4",width:"10"},(0,M.K)("line",{style:e,x1:"0",x2:"10",y1:"2",y2:"2"})):(0,M.K)("svg",{height:"10",width:"10"},(0,M.K)("line",{style:e,x1:"5",x2:"5",y1:"0",y2:"10"}))}function G(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"vertical";const s=document.createElement("div");return s.style.height="20px",s.className=H,null!=e&&(s.style.opacity=e.toString()),O.append(s,j.bind(null,t)),s}function U(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical",i=arguments.length>3?arguments[3]:void 0;e.infos.forEach((e,l)=>{if(i&&2===l)e.preview=G(t,s);else{const t=((0,D.Et)(e.size)?(0,z.Lz)(e.size):0)+("horizontal"===s?20:10),i=e.preview,l="div"===i?.tagName.toLowerCase(),r=l?i:document.createElement("div");r.className=H,"horizontal"===s?r.style.width=`${t}px`:r.style.height=`${t}px`,!l&&i&&r.appendChild(i),e.preview=r}})}function W(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"classic";const s=e.infos,i=s.at(0),l=s.at(-1),r=(0,D.Et)(i.size)?(0,z.Lz)(i.size):0,a=(0,D.Et)(l.size)?(0,z.Lz)(l.size):0;return"classic"===t?(r+10)/2:(r-a)/2}function J(e,t){if(!e)return null;const s=e.infos.map(e=>e.color),i=(0,N.J0)("full"===t.type?s:"above"===t.type?s.slice(0,3):s.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,cssEffectFilter:t.cssEffectFilter,ariaLabel:t.ariaLabel});return i.className=q,null!=t.opacity&&(i.style.opacity=t.opacity.toString()),i}function Q(e,t,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vertical",l=0;const r=e.infos,a=Math.floor(r.length/2),n="full"===t||"above"===t?0:a,o="full"===t||"below"===t?r.length-1:a;for(let c=n;c<=o;c++)if(s&&c===a)l+="horizontal"===i?10:20;else{const e=r[c].size;l+=((0,D.Et)(e)?(0,z.Lz)(e):0)+("horizontal"===i?20:10)}return Math.round(l)}function X(e,t,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vertical";const l=Q(e,t,s,i),r=e.infos,a=Math.floor(r.length/2),n="full"===t||"above"===t?0:a,o="full"===t||"below"===t?r.length-1:a,c=(0,D.Et)(r[n].size)?r[n].size:0,d=(0,D.Et)(r[o].size)?r[o].size:0,p="full"===t?c+d:"above"===t?c:d,h=s?"vertical"===i?20:10:0,y="vertical"===i?10*("full"===t?2:1):20*("full"===t?2:1);return Math.round(l-((0,z.Lz)(p)/2+h/2+y/2))}function Y(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical";const i=e.infos;let l=i.find(e=>{let{type:t}=e;return"size-ramp"===t}),r=i.find(e=>{let{type:t}=e;return"color-ramp"===t});return l&&(l={...l},l.infos=[...l.infos],U(l,t,s,!0)),r&&(r={...r},r.infos=[...r.infos]),"horizontal"===s&&(l?.infos.reverse(),r?.infos.reverse()),{sizeRampElement:l,colorRampElement:r}}function ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"vertical";const s=e.infos;let i=s.find(e=>{let{type:t}=e;return"size-ramp"===t}),l=s.find(e=>{let{type:t}=e;return"color-ramp"===t});return i&&(i={...i},i.infos=[...i.infos],U(i,null,t,!1)),l&&(l={...l},l.infos=[...l.infos]),"horizontal"===t&&(i?.infos.reverse(),l?.infos.reverse()),{sizeRampElement:i,colorRampElement:l}}const te={marginLeft:"3px"},se={display:"table-cell",verticalAlign:"middle"},ie={display:"flex",alignItems:"flex-start"};let le=class extends d.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,cssEffectFilter:s,key:i}=this,{sizeRampElement:l,colorRampElement:r}=Y(e,t,"horizontal");if(!l)return null;const a=Q(l,"full",!0,"horizontal"),n=X(l,"above",!0,"horizontal"),o=X(l,"below",!0,"horizontal"),c=this.messages?.previewColorRampAriaLabel,d=J(r,{width:n,height:12,rampAlignment:"horizontal",opacity:t,type:"above",cssEffectFilter:s,ariaLabel:c}),p=J(r,{width:o,height:12,rampAlignment:"horizontal",opacity:t,type:"below",cssEffectFilter:s,ariaLabel:c}),h=W(l,"card"),y=l.infos.map(e=>e.label),g=y.length-1,v=y.map((e,t)=>0===t||t===g?(0,M.K)("div",{key:t},e):null),u={marginTop:"3px",display:"flex"};(0,R.V8)(this.container)?u.marginRight=`${h}px`:u.marginLeft=`${h}px`;const f={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return(0,M.K)("div",{class:m.layerRow,key:`${i}-container`,styles:{display:"flex",flexDirection:"column"}},(0,M.K)("div",{class:this.classes(m.symbolContainer,m.sizeRampHorizontal),styles:{display:"flex",flexDirection:"row"}},l.infos.map((e,t)=>(0,M.K)("div",{afterCreate:w,bind:e.preview,class:m.symbol,key:t}))),d?(0,M.K)("div",{class:m.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:u},(0,M.K)("div",{afterCreate:w,bind:d}),(0,M.K)("div",{afterCreate:w,bind:p})):null,(0,M.K)("div",{class:m.layerInfo},(0,M.K)("div",{class:m.rampLabelsContainer,styles:f},v)))}};(0,i.Cg)([(0,n.MZ)()],le.prototype,"cssEffectFilter",void 0),(0,i.Cg)([(0,n.MZ)()],le.prototype,"legendElement",void 0),(0,i.Cg)([(0,n.MZ)()],le.prototype,"messages",void 0),(0,i.Cg)([(0,n.MZ)()],le.prototype,"opacity",void 0),le=(0,i.Cg)([(0,c.$)("esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp")],le);let re=class extends d.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,cssEffectFilter:s,key:i}=this,{sizeRampElement:l,colorRampElement:r}=ee(e,"horizontal");if(!l)return null;const a=Q(l,"full",!1,"horizontal"),n=J(r,{width:X(l,"full",!1,"horizontal"),height:12,rampAlignment:"horizontal",opacity:t,type:"full",cssEffectFilter:s,ariaLabel:this.messages?.previewColorRampAriaLabel}),o=W(l,"card"),c=l.infos.length-1,d=l.infos.map((e,t)=>0===t||t===c?(0,M.K)("div",{key:t},e.label):null),p={marginTop:"3px",display:"flex"};(0,R.V8)(this.container)?p.marginRight=`${o}px`:p.marginLeft=`${o}px`;const h={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return(0,M.K)("div",{class:m.layerRow,key:`${i}-container`,styles:{display:"flex",flexDirection:"column"}},(0,M.K)("div",{class:this.classes(m.symbolContainer,m.sizeRampHorizontal),styles:{display:"flex",flexDirection:"row"}},l.infos.map((e,t)=>(0,M.K)("div",{afterCreate:w,bind:e.preview,class:m.symbol,key:t}))),(0,M.K)("div",{class:m.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:p},(0,M.K)("div",{afterCreate:w,bind:n})),(0,M.K)("div",{class:m.layerInfo},(0,M.K)("div",{class:m.rampLabelsContainer,styles:h},d)))}};(0,i.Cg)([(0,n.MZ)()],re.prototype,"cssEffectFilter",void 0),(0,i.Cg)([(0,n.MZ)()],re.prototype,"legendElement",void 0),(0,i.Cg)([(0,n.MZ)()],re.prototype,"messages",void 0),(0,i.Cg)([(0,n.MZ)()],re.prototype,"opacity",void 0),re=(0,i.Cg)([(0,c.$)("esri.widgets.Legend.styles.card.UnivariateColorSizeRamp")],re);var ae,ne=s(61934),oe=s(87540);let ce=ae=class extends d.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),t=E(this.legendElement,this.messages),s=this.hasIndicators&&!this.isChild?(0,M.K)("div",null,(0,M.K)(oe.D,{class:m.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),(0,M.K)(oe.D,{class:m.layerCaption,level:(0,oe.S)(this.headingLevel)},t)):t?(0,M.K)(oe.D,{class:m.layerCaption,level:this.headingLevel},t):null;return(0,M.K)("section",{"aria-labelledby":this.key,class:m.section,id:`${this.key}-panel`,key:this.key,role:"tabpanel",tabIndex:0},s,e)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return(0,M.K)(P,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return(0,M.K)(x,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return(0,ne.p)(this.legendElement,this.id,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":{const{preview:e}=this.legendElement;if(!e)return null;const t=(0,f.V)(this.messages.previewPieChartAriaLabel,{label:null});return t&&e.querySelector("svg")?.setAttribute("aria-label",t),(0,M.K)("div",{afterCreate:w,bind:e,class:m.pieChartRampPreview,key:`${this.key}-preview`})}case"univariate-above-and-below-ramp":return(0,M.K)(le,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return(0,M.K)(re,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const t=e.infos.map(t=>this._renderElementInfo(t,e.legendType)).filter(Boolean);if(!t.length)return null;const s=this.activeLayerInfo.legendElements.some(e=>{let{type:t}=e;return"relationship-ramp"===t}),i=t[0]?.properties?.classes?.[m.symbolRow],l={[m.labelContainer]:!i&&!s,[m.relationshipLabelContainer]:s};return(0,M.K)("div",{class:this.classes(l)},t)}_renderElementInfo(e,t){const{layer:s}=this,i="label"in e?e.label:null,l=`${this.key}-${i}`;if("type"in e&&e.type)return(0,M.K)(ae,{activeLayerInfo:this.activeLayerInfo,cssEffectFilter:this.cssEffectFilter,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:l,layer:s,legendElement:e,messages:this.messages});if(!("preview"in e&&e.preview||"src"in e&&e.src))return null;const r=C(s,t),a=L(this.messages,i,!1)||"";if("src"in e&&e.src)return(0,M.K)("div",{class:m.layerRow,key:`${l}-row`},this._renderImage(e,s,r),(0,M.K)("div",{class:m.imageLabel},a));if("symbol"in e&&e.preview){if(!e.symbol?.type.includes("simple-fill")){if(!e.label)return(0,M.K)("div",{afterCreate:w,bind:e.preview,key:`${l}-row`});const t={[m.symbolCell]:this.hasIndicators},{preview:s}=e,i="previewAriaLabel"in e?e.previewAriaLabel:null,r="label"in e?L(this.messages,e.label,!1):null,n=s.querySelector("svg"),o=k(this.messages,i||r);return o&&n&&n.setAttribute("aria-label",o),(0,M.K)("div",{class:this.classes(m.layerRow,{[m.symbolRow]:this.hasIndicators}),key:`${l}-row`},(0,M.K)("div",{afterCreate:w,bind:s,class:this.classes(t)}),(0,M.K)("div",{class:this.classes(m.imageLabel,{[m.labelCell]:this.hasIndicators})},a))}return(0,M.K)("div",{class:m.layerRow,key:`${l}-row`},(0,M.K)("div",{class:m.labelElement,styles:this._getBackgroundStyles(e)},a))}return null}_getBackgroundStyles(e){const t=e.symbol,s=t.color,i=!!s?.a,l="outline"in t?t.outline:null,r=!!l?.color?.a,a=new g.A(i&&s?[s.r,s.g,s.b,s.a*this.layer.opacity]:[255,255,255,0]),n=r&&l.color?new g.A([l.color.r,l.color.g,l.color.b,l.color.a*this.layer.opacity]):new g.A([255,255,255,0]),o=e.symbol.color?.isBright??!0,c=o?"black":"white",d=o?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:i?a.toCss(!0):"none",color:c,textShadow:`-1px -1px 0 ${d},\n                  1px -1px 0 ${d},\n                  -1px 1px 0 ${d},\n                  1px 1px 0 ${d}`,border:r?`1px solid ${n.toCss(!0)}`:"none",filter:this.cssEffectFilter??void 0}}_renderImage(e,t,s){const{previewAriaLabel:i,src:l,opacity:r}=e,a=L(this.messages,e.label,!1),n={[m.imageryLayerStretchedImage]:s,[m.symbol]:!s},o={opacity:`${r??t.opacity}`},c=k(this.messages,i||a);return(0,M.K)("img",{alt:c,"aria-label":c,border:0,class:this.classes(n),height:e.height,src:l,styles:o,width:e.width})}};(0,i.Cg)([(0,n.MZ)()],ce.prototype,"activeLayerInfo",void 0),(0,i.Cg)([(0,n.MZ)()],ce.prototype,"cssEffectFilter",void 0),(0,i.Cg)([(0,n.MZ)()],ce.prototype,"hasIndicators",void 0),(0,i.Cg)([(0,n.MZ)()],ce.prototype,"headingLevel",void 0),(0,i.Cg)([(0,n.MZ)()],ce.prototype,"isChild",void 0),(0,i.Cg)([(0,n.MZ)()],ce.prototype,"layer",void 0),(0,i.Cg)([(0,n.MZ)()],ce.prototype,"legendElement",void 0),(0,i.Cg)([(0,n.MZ)()],ce.prototype,"messages",void 0),ce=ae=(0,i.Cg)([(0,c.$)("esri.widgets.Legend.styles.card.LegendElement")],ce);var de=s(94126),pe=s(63582);let he=class extends d.A{constructor(e,t){super(e,t),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}loadDependencies(){return(0,de.W)({carousel:()=>Promise.resolve().then(s.bind(s,82538)),"carousel-item":()=>Promise.resolve().then(s.bind(s,65595))})}render(){this._hasIndicators="auto"===this.layout&&this.view&&this.view.container.clientWidth<=768||"stack"===this.layout;const e=this._hasIndicators?this._renderCarousel():this._renderLayers(),t={[m.stacked]:this._hasIndicators};return(0,M.K)("div",{class:this.classes(m.base,t)},e||(0,M.K)("div",{class:m.message},this.messages.noLegend))}_renderCarousel(){const e=[],t=this.activeLayerInfos;if(t)for(const s of t)this._renderSections(s,e);return e?.length?(0,M.K)("calcite-carousel",{class:m.carousel,label:this.messages.carousel},e.map((t,s)=>(0,M.K)("calcite-carousel-item",{class:m.carouselItem,key:s,label:(0,f.V)(this.messagesCommon.pagination.pageText,{index:s+1,total:e.length})},t))):null}_renderLayers(){const e=this.activeLayerInfos,t=e?.toArray()?.map(e=>this._renderLegendForLayer(e)).filter(Boolean);return t?.length?t:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.toArray().map(this._renderLegendForLayer,this);return(0,M.K)("section",{class:this.classes(m.service,m.groupLayer),key:e.layer.uid},(0,M.K)("div",{class:m.serviceCaptionContainer},e.title),t)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){const t=e.legendElements?.filter(Boolean);if(!t?.length)return null;const s=t.map(t=>(0,M.K)(ce,{activeLayerInfo:e,cssEffectFilter:e.cssEffectFilter,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${t.type}`,layer:e.layer,legendElement:t,messages:this.messages})),i={[m.groupLayerChild]:!!e.parent};return(0,M.K)("section",{class:this.classes(m.service,i),key:e.layer.uid},(0,M.K)("div",{class:m.serviceCaptionContainer},(0,M.K)("div",{class:m.serviceCaptionText},e.title)),(0,M.K)("div",{class:m.serviceContent},s))}_renderSections(e,t){if(!e.ready)return;if(e.children.length)for(const i of e.children)this._renderSections(i,t);const s=e.legendElements;if(s?.length)for(const i of s){const s=(0,M.K)(ce,{activeLayerInfo:e,cssEffectFilter:e.cssEffectFilter,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${i.type}`,layer:e.layer,legendElement:i,messages:this.messages});s&&t.push(s)}}};(0,i.Cg)([(0,n.MZ)()],he.prototype,"activeLayerInfos",void 0),(0,i.Cg)([(0,n.MZ)()],he.prototype,"headingLevel",void 0),(0,i.Cg)([(0,n.MZ)()],he.prototype,"layout",void 0),(0,i.Cg)([(0,n.MZ)(),(0,pe.G)("esri/widgets/Legend/t9n/Legend")],he.prototype,"messages",void 0),(0,i.Cg)([(0,n.MZ)(),(0,pe.G)("esri/t9n/common")],he.prototype,"messagesCommon",void 0),(0,i.Cg)([(0,n.MZ)({readOnly:!0})],he.prototype,"type",void 0),(0,i.Cg)([(0,n.MZ)()],he.prototype,"view",void 0),he=(0,i.Cg)([(0,c.$)("esri.widgets.Legend.styles.card.CardView")],he);const ye="esri-legend",me={service:`${ye}__service`,label:`${ye}__service-label`,layer:`${ye}__layer`,groupLayer:`${ye}__group-layer`,groupLayerChild:`${ye}__group-layer-child`,layerTable:`${ye}__layer-table`,layerTableSizeRamp:`${ye}__layer-table--size-ramp`,layerChildTable:`${ye}__layer-child-table`,layerCaption:`${ye}__layer-caption`,layerBody:`${ye}__layer-body`,layerRow:`${ye}__layer-row`,layerCell:`${ye}__layer-cell`,layerInfo:`${ye}__layer-cell ${ye}__layer-cell--info`,imageryLayerStretchedImage:`${ye}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${ye}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${ye}__imagery-layer-info--stretched`,symbolContainer:`${ye}__layer-cell ${ye}__layer-cell--symbols`,symbol:`${ye}__symbol`,rampContainer:`${ye}__ramps`,sizeRamp:`${ye}__size-ramp`,colorRamp:`${ye}__color-ramp`,opacityRamp:`${ye}__opacity-ramp`,borderlessRamp:`${ye}__borderless-ramp`,rampTick:`${ye}__ramp-tick`,rampFirstTick:`${ye}__ramp-tick-first`,rampLastTick:`${ye}__ramp-tick-last`,rampLabelsContainer:`${ye}__ramp-labels`,rampLabel:`${ye}__ramp-label`,message:`${ye}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"};let ge=class extends d.A{constructor(e,t){super(e,t),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const t="opacity-ramp"===this.legendElement.type?me.opacityRamp:"";return e.className=`${me.colorRamp} ${t}`,null!=this.opacity&&(e.style.opacity=this.opacity.toString()),e}render(){const{legendElement:e,_preview:t}=this;if(!t)return null;const s={width:"24px"},i={height:t.style.height},l=(0,f.V)(this.messages.previewColorRampAriaLabel,{label:null});return l&&t.querySelector("svg")?.setAttribute("aria-label",l),(0,M.K)("div",{class:me.layerRow,key:`${this.key}-row`},(0,M.K)("div",{class:me.symbolContainer,styles:s},(0,M.K)("div",{afterCreate:w,bind:t,class:me.rampContainer})),(0,M.K)("div",{class:me.layerInfo},(0,M.K)("div",{class:me.rampLabelsContainer,styles:i},e.infos.map((t,s)=>this._renderRampLabel(t,s,e.type)))))}_renderRampLabel(e,t,s){return(0,M.K)("div",{class:e.label?me.rampLabel:void 0,key:`${this.key}-stop-${e.label??t}-label`},$(e,s,this.messages))}};(0,i.Cg)([(0,n.MZ)()],ge.prototype,"_preview",null),(0,i.Cg)([(0,n.MZ)()],ge.prototype,"legendElement",void 0),(0,i.Cg)([(0,n.MZ)()],ge.prototype,"messages",void 0),(0,i.Cg)([(0,n.MZ)()],ge.prototype,"opacity",void 0),ge=(0,i.Cg)([(0,c.$)("esri.widgets.Legend.styles.classic.ColorRamp")],ge);let ve=class extends d.A{constructor(e,t){super(e,t),this.legendElement=null}render(){const e=this.legendElement.infos.map(e=>this._renderRow(e)).filter(Boolean);return e.length?"spike"===this.legendElement.theme?S(this.legendElement):(0,M.K)("div",{class:me.layerBody},e):null}_renderRow(e){return e.preview?(0,M.K)("div",{class:me.layerRow,key:`${this.key}-${e.label}-row`},(0,M.K)("div",{class:this.classes(me.symbolContainer,me.sizeRamp)},(0,M.K)("div",{afterCreate:w,bind:e.preview,class:me.symbol})),(0,M.K)("div",{class:me.layerInfo},L(this.messages,e.label,!1)||"")):null}};(0,i.Cg)([(0,n.MZ)()],ve.prototype,"legendElement",void 0),(0,i.Cg)([(0,n.MZ)()],ve.prototype,"messages",void 0),ve=(0,i.Cg)([(0,c.$)("esri.widgets.Legend.styles.classic.SizeRamp")],ve);let ue=class extends d.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,cssEffectFilter:s,key:i}=this,{sizeRampElement:l,colorRampElement:r}=Y(e,t);if(!l)return null;const a=this.messages.previewColorRampAriaLabel,n=X(l,"above",!0),o=X(l,"below",!0),c=J(r,{width:12,height:n,rampAlignment:"vertical",opacity:t,type:"above",cssEffectFilter:s,ariaLabel:a}),d=J(r,{width:12,height:o,rampAlignment:"vertical",opacity:t,type:"below",cssEffectFilter:s,ariaLabel:a}),p=W(l),h=l.infos.map(e=>e.label),y=h.map((e,t)=>{const s=2===t;return 0===t?(0,M.K)("div",{class:e?c?me.univariateAboveAndBelowLabel:me.rampLabel:void 0,key:`${i}-color-ramp-above-label-${e??t}`},e):s?(0,M.K)("div",null):null}),m=h.length-1,g=Math.floor(h.length/2),v=h.map((e,t)=>t===g||t===m?(0,M.K)("div",{class:e?c?me.univariateAboveAndBelowLabel:me.rampLabel:void 0,key:`${i}-color-ramp-below-label-${e??t}`},e):null),u={display:"table-cell",verticalAlign:"middle"},f={marginTop:`${p}px`},b={height:`${n}px`},L={height:`${o}px`};return(0,M.K)("div",{key:`${i}-container`,styles:ie},(0,M.K)("div",{class:me.layerBody},l.infos.map((e,t)=>(0,M.K)("div",{class:this.classes(me.layerRow,me.sizeRamp),key:`${i}-row-${t}`},(0,M.K)("div",{afterCreate:w,bind:e.preview,class:me.symbol,styles:u}),c||t%2!=0?null:(0,M.K)("div",{class:me.layerInfo},h[t])))),c?(0,M.K)("div",{styles:f},(0,M.K)("div",{styles:te},(0,M.K)("div",{styles:se},(0,M.K)("div",{afterCreate:w,bind:c,class:me.rampContainer})),(0,M.K)("div",{styles:se},(0,M.K)("div",{class:me.rampLabelsContainer,styles:b},y))),(0,M.K)("div",{styles:te},(0,M.K)("div",{styles:se},(0,M.K)("div",{afterCreate:w,bind:d,class:me.rampContainer})),(0,M.K)("div",{styles:se},(0,M.K)("div",{class:me.rampLabelsContainer,styles:L},v)))):null)}};(0,i.Cg)([(0,n.MZ)()],ue.prototype,"cssEffectFilter",void 0),(0,i.Cg)([(0,n.MZ)()],ue.prototype,"legendElement",void 0),(0,i.Cg)([(0,n.MZ)()],ue.prototype,"messages",void 0),(0,i.Cg)([(0,n.MZ)()],ue.prototype,"opacity",void 0),ue=(0,i.Cg)([(0,c.$)("esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp")],ue);let fe=class extends d.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,cssEffectFilter:s,key:i}=this,{sizeRampElement:l,colorRampElement:r}=ee(e);if(!l)return null;const a=W(l),n=X(l,"full",!1),o=J(r,{width:12,height:n,rampAlignment:"vertical",opacity:t,type:"full",cssEffectFilter:s,ariaLabel:this.messages?.previewColorRampAriaLabel}),c=l.infos.length-1,d=l.infos.map((e,t)=>0===t||t===c?(0,M.K)("div",{class:e.label?r?me.univariateAboveAndBelowLabel:me.rampLabel:void 0,key:`${i}-color-ramp-label-${e.label??t}`},e.label):null),p={display:"table-cell",verticalAlign:"middle"},h={marginTop:`${a}px`},y={height:`${n}px`};return(0,M.K)("div",{key:`${i}-container`,styles:ie},(0,M.K)("div",{class:me.layerBody},l.infos.map((e,t)=>(0,M.K)("div",{class:this.classes(me.layerRow,me.sizeRamp),key:`${i}-row-${t}`},(0,M.K)("div",{afterCreate:w,bind:e.preview,class:me.symbol,styles:p})))),(0,M.K)("div",{styles:h},(0,M.K)("div",{styles:te},(0,M.K)("div",{styles:se},(0,M.K)("div",{afterCreate:w,bind:o,class:me.rampContainer})),(0,M.K)("div",{styles:se},(0,M.K)("div",{class:me.rampLabelsContainer,styles:y},d)))))}};var be;(0,i.Cg)([(0,n.MZ)()],fe.prototype,"cssEffectFilter",void 0),(0,i.Cg)([(0,n.MZ)()],fe.prototype,"legendElement",void 0),(0,i.Cg)([(0,n.MZ)()],fe.prototype,"messages",void 0),(0,i.Cg)([(0,n.MZ)()],fe.prototype,"opacity",void 0),fe=(0,i.Cg)([(0,c.$)("esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp")],fe);let we=be=class extends d.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),t=E(this.legendElement,this.messages),s=this.isChild?me.layerChildTable:me.layerTable,i=t?(0,M.K)("div",{class:me.layerCaption},t):null,l={[me.layerTableSizeRamp]:"size-ramp"===this.legendElement.type||!this.isChild};return(0,M.K)("section",{class:this.classes(s,l),key:`${this.key}-table`},i,e)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return(0,M.K)(ve,{key:this.key,legendElement:this.legendElement,messages:this.messages});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return(0,M.K)(ge,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return(0,ne.p)(this.legendElement,this.id,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":{const{preview:e}=this.legendElement;if(!e)return null;const t=(0,f.V)(this.messages.previewPieChartAriaLabel,{label:null});return t&&e.querySelector("svg")?.setAttribute("aria-label",t),(0,M.K)("div",{afterCreate:w,bind:e,key:`${this.key}-preview`})}case"univariate-above-and-below-ramp":return(0,M.K)(ue,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return(0,M.K)(fe,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const t=e.infos.map(t=>this._renderElementInfo(t,e.legendType)).filter(Boolean);return t.length?(0,M.K)("div",{class:me.layerBody},t):null}_renderElementInfo(e,t){const{layer:s}=this,i="label"in e?e.label:null,l=`${this.key}-${i}`;if("type"in e&&e.type)return(0,M.K)(be,{cssEffectFilter:this.cssEffectFilter,isChild:!0,key:l,layer:s,legendElement:e,messages:this.messages});if(!("preview"in e&&e.preview||"src"in e&&e.src))return null;const r=C(s,t),a={[me.imageryLayerInfoStretched]:r},n={[me.imageryLayerInfoStretched]:r};return(0,M.K)("div",{class:me.layerRow,key:`${l}-row`},(0,M.K)("div",{class:this.classes(me.symbolContainer,n)},this._renderPreview(e,r)),(0,M.K)("div",{class:this.classes(me.layerInfo,a)},L(this.messages,i,!1)||""))}_renderPreview(e,t){const{layer:s}=this;if("preview"in e&&e.preview){const{preview:t}=e,s="previewAriaLabel"in e?e.previewAriaLabel:null,i="label"in e?L(this.messages,e.label,!1):null,l=t.querySelector("svg"),r=k(this.messages,s||i);return r&&l&&l.setAttribute("aria-label",r),(0,M.K)("div",{afterCreate:w,bind:t,class:me.symbol})}return"src"in e&&e.src?this._renderImage(e,s,t):null}_renderImage(e,t,s){const{previewAriaLabel:i,src:l,opacity:r}=e,a=L(this.messages,e.label,!1),n={[me.imageryLayerStretchedImage]:s,[me.symbol]:!s},o={opacity:`${r??t.opacity}`},c=k(this.messages,i||a);return(0,M.K)("img",{alt:c,"aria-label":c,border:0,class:this.classes(n),height:e.height,src:l,styles:o,width:e.width})}};(0,i.Cg)([(0,n.MZ)()],we.prototype,"cssEffectFilter",void 0),(0,i.Cg)([(0,n.MZ)()],we.prototype,"isChild",void 0),(0,i.Cg)([(0,n.MZ)()],we.prototype,"layer",void 0),(0,i.Cg)([(0,n.MZ)()],we.prototype,"legendElement",void 0),(0,i.Cg)([(0,n.MZ)()],we.prototype,"messages",void 0),we=be=(0,i.Cg)([(0,c.$)("esri.widgets.Legend.styles.classic.LegendElement")],we);var Le=s(98108);const _e=`${ye}__`;let Ce=class extends d.A{constructor(e,t){super(e,t),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,t=e?.toArray().map(e=>this._renderLegendForLayer(e)).filter(Boolean);return t?.length?(0,M.K)("section",null,t):(0,M.K)("div",{class:me.message,key:"no-legend"},this.messages.noLegend)}_renderLegendForLayer(e,t){if(!e.ready)return null;const s=`${e.layer.uid}-version-${e.version}`,i=`${_e}${t?`${t}-`:""}${s}`,l=e.title?(0,oe.D)({level:this.headingLevel,class:this.classes(Le.D.heading,me.label)},e.title):null;if(e.children.length){const t=e.children.toArray().map(e=>this._renderLegendForLayer(e,s));return(0,M.K)("section",{class:this.classes(me.service,me.groupLayer),key:i},l,t)}return this._renderLegendElementsForLayer(e,l,i)}_renderLegendElementsForLayer(e,t,s){const i=e.legendElements?.filter(Boolean);if(!i?.length)return null;const l=i.map(t=>(0,M.K)(we,{cssEffectFilter:e.cssEffectFilter,isChild:!1,key:`${s}-${t.type}`,layer:e.layer,legendElement:t,messages:this.messages})),r={[me.groupLayerChild]:!!e.parent};return(0,M.K)("section",{class:this.classes(me.service,r),key:s},t,(0,M.K)("div",{class:me.layer},l))}};(0,i.Cg)([(0,n.MZ)()],Ce.prototype,"activeLayerInfos",void 0),(0,i.Cg)([(0,n.MZ)()],Ce.prototype,"headingLevel",void 0),(0,i.Cg)([(0,n.MZ)(),(0,pe.G)("esri/widgets/Legend/t9n/Legend")],Ce.prototype,"messages",void 0),(0,i.Cg)([(0,n.MZ)({readOnly:!0})],Ce.prototype,"type",void 0),Ce=(0,i.Cg)([(0,c.$)("esri.widgets.Legend.styles.classic.ClassicView")],Ce);const $e="esri-legend";let Ee=class extends d.A{constructor(e,t){super(e,t),this.headingLevel=3,this.messages=null,this.viewModel=new p.A,this.style=new Ce,(0,l.ED)(r.A.getLogger(this),"Legend","arcgis-legend",{version:"4.34"})}initialize(){this.addHandles([(0,a.on)(()=>this.view,"resize",()=>this.scheduleRender()),(0,a.on)(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),(0,a.wB)(()=>this.headingLevel,e=>{const{style:t}=this;t&&(t.headingLevel=e)}),(0,a.wB)(()=>this.style,(e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,"card"===e.type&&(e.view=this.view),e.headingLevel=this.headingLevel)},a.Vh)])}destroy(){this.style?.destroy()}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return"legend"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}set style(e){const t=this._get("style");e!==t&&t?.destroy(),this._set("style",e)}castStyle(e){if(e instanceof he||e instanceof Ce)return e;if("string"==typeof e)return"card"===e?new he:new Ce;if(e&&"string"==typeof e.type){const t={...e};return delete t.type,"card"===e.type?new he(t):new Ce(t)}return new Ce}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return(0,M.K)("div",{class:this.classes($e,Le.D.widget,this.style instanceof Ce?Le.D.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach(e=>{this.removeHandles(`version_${e.layer.uid}`),this._renderOnActiveLayerInfoChange(e)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const t=(0,a.wB)(()=>e.version,()=>this.scheduleRender());this.addHandles(t,`version_${e.layer.uid}`);const s=(0,a.on)(()=>e.children,"change",()=>e.children.forEach(e=>this._renderOnActiveLayerInfoChange(e)),a.Vh);this.addHandles(s,`version_${e.layer.uid}`),e.children.forEach(e=>this._renderOnActiveLayerInfoChange(e))}};(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"activeLayerInfos",null),(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"basemapLegendVisible",null),(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"groundLegendVisible",null),(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"headingLevel",void 0),(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"hideLayersNotInCurrentView",null),(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"keepCacheOnDestroy",null),(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"respectLayerDefinitionExpression",null),(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"respectLayerVisibility",null),(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"icon",null),(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"label",null),(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"layerInfos",null),(0,i.Cg)([(0,n.MZ)(),(0,pe.G)("esri/widgets/Legend/t9n/Legend")],Ee.prototype,"messages",void 0),(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"style",null),(0,i.Cg)([(0,o.w)("style")],Ee.prototype,"castStyle",null),(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"view",null),(0,i.Cg)([(0,n.MZ)()],Ee.prototype,"viewModel",void 0),Ee=(0,i.Cg)([(0,c.$)("esri.widgets.Legend")],Ee);const Ke=Ee},87540:(e,t,s)=>{s.d(t,{D:()=>n,S:()=>c});var i=s(15941),l=s(98108),r=s(15187),a=s(54761);function n(e,t){let{level:s,class:i,...n}=e;const c=o(s);return(0,a.K)(`h${c}`,{...n,"aria-level":String(c),class:(0,r.Ly)(l.D.heading,i),role:"heading"},t)}function o(e){return(0,i.qE)(Math.ceil(e),1,6)}function c(e){return o(e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))}}}]);
//# sourceMappingURL=424.1f14ff84.chunk.js.map